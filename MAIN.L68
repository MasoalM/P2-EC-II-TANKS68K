00002C50 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 30/11/2024 16:59:14

00000000                             1  *-----------------------------------------------------------
00000000                             2  * Title      :  TANKS
00000000                             3  * Written by :  Sergi Villalonga Gamundí y Marcos Socías Alberto
00000000                             4  * Date       :  
00000000                             5  * Description:
00000000                             6  *-----------------------------------------------------------
00001000                             7      ORG    $1000
00001000                             8      
00001000                             9      INCLUDE "SYSCONST.X68"
00001000                            10  
00001000                            11  ; --- CONSTANTES RELACIONADAS CON LA PANTALLA --------------
00001000                            12  
00001000  =00000280                 13  SCRWIDTH    EQU     640         ; ANCHURA DE LA PANTALLA DEL JUEGO
00001000  =000001E0                 14  SCRHEIGH    EQU     480         ; ALTURA DE LA PANTALLA DEL JUEGO
00001000  =00000032                 15  SCRFPS      EQU     50          ; SCREEN FRAMES PER SECOND, EN NUESTRO CASO 50 FPS (UNA INTERRUPCIÓN CADA 20 ms)
00001000                            16  
00001000                            17  ; --- KEYCODES ---------------------------------------------
00001000                            18  
00001000  =00000041                 19  KBDLEFT     EQU     'A'
00001000  =00000057                 20  KBDUP       EQU     'W'
00001000  =00000044                 21  KBDRIGHT    EQU     'D'
00001000  =00000053                 22  KBDDOWN     EQU     'S'
00001000  =00000020                 23  KBDFIRE     EQU     ' '
00001000  =00000050                 24  KBDPAUSE    EQU     'P'
00001000                            25  
00001000                            26  ; --- SOUND IDENTIFIERS ------------------------------------
00001000                            27  
00001000  =00000000                 28  SNDINTRO    EQU     0
00001000  =00000001                 29  SNDINSTR    EQU     1
00001000  =00000002                 30  SNDWALL     EQU     2
00001000  =00000003                 31  SNDHIT      EQU     3
00001000  =00000004                 32  SNDKILL     EQU     4
00001000  =00000005                 33  SNDWAA      EQU     5
00001000  =00000006                 34  SNDBULEX    EQU     6
00001000  =00000007                 35  SNDDISP     EQU     7
00001000  =00000008                 36  SNDGVR1     EQU     8
00001000  =00000009                 37  SNDGVR2     EQU     9
00001000  =0000000A                 38  SNDWIN      EQU     10
00001000                            39  
00001000                            40  ; --- TRAP NUMBERS -----------------------------------------
00001000                            41  
00001000  =00000000                 42  SCRUPTN     EQU     0           ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                 43  KBDUPTN     EQU     1           ; KEYBOARD UPDATE TRAP NUMBER
00001000  =00000002                 44  MOUUPTN     EQU     2           ; MOUSE UPDATE TRAP NUMBER
00001000  =00000003                 45  SNDPLTN     EQU     3           ; SOUND PLAY TRAP NUMBER
00001000                            46  
00001000                            47  ; --- INTERRUPT NUMBERS ------------------------------------
00001000                            48  
00001000  =00000001                 49  SCRINTN     EQU     1           ; TIMED INTERRUPT NUMBER
00001000                            50  
00001000                            51  
00001000                            52  
00001000                            53  
00001000                            54  
00001000                            55  
00001000                            56  
00001000                            57  
00001000                            58  
00001000                            59  -------------------- end include --------------------
00001000                            60      INCLUDE "CONST.X68"
00001000                            61      
00001000                            62  ; --- CONSTANTES RELACIONADAS CON LA BALA DEL TANQUE -------
00001000                            63  
00001000  =00000004                 64  BULRAD      EQU     4           ; RADIO DE LA BALA
00001000  =0031494D                 65  BULPCOL     EQU     $0031494D   ; COLOR DE CONTORNO DE LA BALA        
00001000  =007CB4BA                 66  BULFCOL     EQU     $007CB4BA   ; COLOR DE RELLENO DE LA BALA  
00001000  =00000004                 67  BULSPEED    EQU     4           ; MAGNITUD DE LA VELOCIDAD X E Y DE LA BALA
00001000  =00000028                 68  BULDMG      EQU     40          ; DAÑO DE LA BALA
00001000  =00000004                 69  MAXTOUCH    EQU     4           ; TOQUES MÁXIMOS DE LA BALA CON LAS PAREDES
00001000                            70  
00001000                            71  ; --- CONSTANTES RELACIONADAS CON EL TANQUE ----------------
00001000                            72  
00001000  =00000018                 73  TANWIDTH    EQU     24                      ; ANCHURA DEL TANQUE
00001000  =00000018                 74  TANHEIGH    EQU     24                      ; ALTURA DEL TANQUE
00001000  =00000002                 75  PLRSPEED    EQU     2                       ; MAGNITUD DE LA VELOCIDAD X E Y DEL JUGADOR
00001000  =00000001                 76  ENESPEED    EQU     1                       ; MAGNITUD DE LA VELOCIDAD X E Y DEL ENEMIGO
00001000  =00000032                 77  PLRINITX    EQU     50                      ; POSICIÓN X INICIAL DEL JUGADOR
00001000  =000000F0                 78  PLRINITY    EQU     SCRHEIGH/2              ; POSICIÓN Y INICIAL DEL JUGADOR
00001000  =00000190                 79  PLRINILF    EQU     BULDMG*10               ; VIDA INICIAL DEL TANQUE JUGADOR
00001000  =00000078                 80  ENEINILF    EQU     BULDMG*3                ; VIDA INICIAL DEL TANQUE ENEMIGO
00001000  =00000014                 81  PLRLIFEH    EQU     20                      ; ALTURA DE LA BARRA DE VIDA DEL JUGADOR
00001000  =000001C6                 82  PLRLIFEY    EQU     SCRHEIGH-PLRLIFEH-6     ; POSICIÓN Y DE LA BARRA DE VIDA DEL JUGADOR
00001000  =000000FF                 83  PLRLIFEC    EQU     $000000FF               ; COLOR DE LA BARRA DE VIDA
00001000  =00000003                 84  PLMAXBUL    EQU     3                       ; CANTIDAD MÁXIMA DE BALAS DISPARADAS SIMULTÁNEAMENTE POR EL JUGADOR
00001000  =00000001                 85  ENMAXBUL    EQU     1                       ; CANTIDAD MÁXIMA DE BALAS DISPARADAS POR LOS ENEMIGOS
00001000  =00000064                 86  ENEMYRTF    EQU     SCRFPS*2                ; TIEMPO MÍNIMO QUE SE TOMA EL ENEMIGO ENTRE DISPARO Y DISPARO. (SCRFPS * SEGUNDOS DESEADOS)
00001000                            87  ;PLRUMDMG    EQU     %00000001               ; UPDATE DAMAGE MASK
00001000                            88  ;PLRPMDMG    EQU     %00000010               ; PLOT DAMAGE MASK
00001000                            89  ;PLRUBDMG    EQU     0                       ; UPDATE DAMAGE BIT
00001000                            90  ;PLRPBDMG    EQU     1                       ; PLOT DAMAGE BIT
00001000                            91  
00001000                            92  
00001000                            93  ; --- CONSTANTES RELACIONADAS CON EL MARCADOR --------------
00001000                            94  
00001000  =00000000                 95  SCOFCOL     EQU     $00000000   ; COLOR DE FONDO DEL TEXTO
00001000                            96              ; podríamos poner una cte del color del texto
00001000  =00000101                 97  SCOLINE     EQU     $0101       ; COORDENADAS DE LA LÍNEA DE TEXTO ($CXCY)
00001000                            98  
00001000                            99  ; --- CONSTANTES RELACIONADAS CON EL ESTADO ----------------
00001000                           100  
00001000  =FFFFFFFF                101  STANONE     EQU     -1          ; NÚMERO DE ESTADO NO EXISTENTE (NO VÁLIDO)
00001000  =000001F4                102  ISCMAXTM    EQU     500         ; CICLOS DE ESPERA EN LA PANTALLA DE INTRODUCCIÓN
00001000  =000001F4                103  INSMAXTM    EQU     500         ; CICLOS DE ESPERA EN LA PANTALLA DE INSTRUCCIONES
00001000                           104  
00001000                           105  ; --- CONSTANTES DE VICTORIA/DERROTA -----------------------
00001000                           106  
00001000  =00000002                107  SCOKILMX    EQU     2           ; MÁXIMAS KILLS
00001000  =00000000                108  PLYRALIV    EQU     0           ; JUGADOR VIVO
00001000  =00000001                109  KILLPLYR    EQU     1           ; MATAR AL JUGADOR (JUGADOR MUERTO)
00001000                           110  
00001000                           111  ; --- CONSTANTES RELACIONADAS CON EL MAPA ------------------
00001000                           112  
00001000  =00000000                113  MAPINIX     EQU     0           ; POSICIÓN DE INICIO DEL MAPA RESPECTO A X
00001000  =00000000                114  MAPINIY     EQU     0           ; POSICIÓN DE INICIO DE MAPA RESPECTO A Y
00001000  =00000014                115  MAPPIEX     EQU     20          ; NÚMERO DE CASILLAS EN EL EJE X
00001000  =0000000F                116  MAPPIEY     EQU     15          ; NÚMERO DE CASILLAS EN EL EJE Y
00001000  =00000020                117  PIESIZX     EQU     32          ; TAMAÑO DE LAS CASILLAS EN EL EJE X
00001000  =00000020                118  PIESIZY     EQU     32          ; TAMAÑO DE LAS CASILLAS EN EL EJE Y 
00001000                           119  
00001000                           120  ; --- CONSTANTES RELACIONADAS CON EL TIPO DE AGENTE ---------
00001000                           121  
00001000  =00000001                122  BULTYPE     EQU     1           ; BALA
00001000  =00000002                123  TANPLAY     EQU     2           ; TANQUE JUGADOR
00001000  =00000003                124  TANENEM     EQU     3           ; TANQUE ENEMIGO
00001000                           125  
00001000                           126  ; --- CONSTANTES RELACIONADAS CON LAS CASILLAS DEL MAPA
00001000                           127  
00001000  =002873A6                128  MARRONMOSTAZA           EQU $002873A6
00001000  =001C5074                129  OCRETIERRA              EQU $001C5074
00001000  =00143851                130  MADERANOGAL             EQU $00143851
00001000  =000E2739                131  CAFETOSTADOINTENSO      EQU $000E2739
00001000  =000A1B28                132  TIERRAHUMEDA            EQU $000A1B28
00001000  =0007131C                133  MADERACARBONIZADA       EQU $0007131C
00001000  =00001E30                134  BRONCEVIEJO             EQU $00001E30
00001000                           135  
00001000                           136  
00001000                           137  
00001000                           138  
00001000                           139  
00001000                           140  
00001000                           141  
00001000                           142  
00001000                           143  
00001000                           144  
00001000                           145  
00001000                           146  
00001000                           147  
00001000                           148  
00001000                           149  
00001000                           150  
00001000                           151  
00001000                           152  
00001000                           153  
00001000                           154  
00001000                           155  
00001000                           156  
00001000                           157  
00001000                           158  
00001000                           159  
00001000                           160  
00001000                           161  -------------------- end include --------------------
00001000                           162      INCLUDE "LIB/DMMCONST.X68"
00001000                           163  ; =============================================================================
00001000                           164  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
00001000                           165  ; =============================================================================
00001000                           166  
00001000  =00000040                167  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                168  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                169  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                170  -------------------- end include --------------------
00001000                           171      INCLUDE "LIB/UTLCONST.X68"
00001000                           172  
00001000  =00000008                173  UTLCHRWD    EQU     8       ; CHARACTER WIDTH IN PIXELS
00001000                           174  
00001000                           175  -------------------- end include --------------------
00001000                           176      INCLUDE "LIB/DMMCODE.X68"
00001000                           177  ; =============================================================================
00001000                           178  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001000                           179  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001000                           180  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001000                           181  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001000                           182  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001000                           183  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001000                           184  ; =============================================================================
00001000                           185  
00001000                           186  ; -----------------------------------------------------------------------------
00001000                           187  DMMINIT
00001000                           188  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001000                           189  ; INPUT    - NONE
00001000                           190  ; OUTPUT   - NONE
00001000                           191  ; MODIFIES - NONE
00001000                           192  ; -----------------------------------------------------------------------------
00001000  48E7 8080                193              MOVEM.L D0/A0,-(A7)
00001004  41F9 00002CC0            194              LEA     DMMDATA,A0
0000100A  303C 0031                195              MOVE.W  #DMMBNUM-1,D0
0000100E  30BC 0000                196  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001012  D1FC 00000040            197              ADD.L   #DMMBSIZE,A0
00001018  51C8 FFF4                198              DBRA.W  D0,.LOOP
0000101C  4CDF 0101                199              MOVEM.L (A7)+,D0/A0
00001020  4E75                     200              RTS
00001022                           201  
00001022                           202  ; -----------------------------------------------------------------------------
00001022                           203  DMMFIRST
00001022                           204  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001022                           205  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001022                           206  ; INPUT    - NONE
00001022                           207  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001022                           208  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001022                           209  ; -----------------------------------------------------------------------------
00001022  41F9 00002CC0            210              LEA     DMMDATA,A0
00001028  4A58                     211  DMMFRLOP    TST.W   (A0)+
0000102A  6600 0016                212              BNE     DMMFRFND
0000102E  D1FC 0000003E            213              ADD.L   #DMMBSIZE-2,A0
00001034  B1FC 0000393F            214  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000103A  6DEC                     215              BLT     DMMFRLOP
0000103C  207C 00000000            216              MOVE.L  #0,A0
00001042  4E75                     217  DMMFRFND    RTS
00001044                           218  
00001044                           219  ; -----------------------------------------------------------------------------
00001044                           220  DMMNEXT
00001044                           221  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001044                           222  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001044                           223  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001044                           224  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001044                           225  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001044                           226  ; -----------------------------------------------------------------------------
00001044  2F00                     227              MOVE.L  D0,-(A7)
00001046  2008                     228              MOVE.L  A0,D0
00001048  C0BC FFFFFFC0            229              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000104E  0680 00000040            230              ADD.L   #DMMBSIZE,D0
00001054  2040                     231              MOVE.L  D0,A0
00001056  201F                     232              MOVE.L  (A7)+,D0
00001058  60DA                     233              BRA     DMMFRCOM
0000105A                           234  
0000105A                           235  ; -----------------------------------------------------------------------------
0000105A                           236  DMMFRSTO
0000105A                           237  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000105A                           238  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000105A                           239  ; INPUT    - D0.W : ID TO SEARCH
0000105A                           240  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000105A                           241  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000105A                           242  ; -----------------------------------------------------------------------------
0000105A  41F9 00002CC0            243              LEA     DMMDATA,A0
00001060  B058                     244  DMMFLOOP    CMP.W   (A0)+,D0
00001062  6700 0016                245              BEQ     DMMFFND
00001066  D1FC 0000003E            246              ADD.L   #DMMBSIZE-2,A0
0000106C  B1FC 0000393F            247  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001072  6DEC                     248              BLT     DMMFLOOP
00001074  207C 00000000            249              MOVE.L  #0,A0
0000107A  4E75                     250  DMMFFND     RTS
0000107C                           251  
0000107C                           252  ; -----------------------------------------------------------------------------
0000107C                           253  DMMNEXTO
0000107C                           254  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000107C                           255  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000107C                           256  ; INPUT    - D0.W : ID TO SEARCH
0000107C                           257  ;            A0   : POINTER WITHIN THE CURRENT SLOT
0000107C                           258  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000107C                           259  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000107C                           260  ; -----------------------------------------------------------------------------
0000107C  2F00                     261              MOVE.L  D0,-(A7)
0000107E  2008                     262              MOVE.L  A0,D0
00001080  C0BC FFFFFFC0            263              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001086  0680 00000040            264              ADD.L   #DMMBSIZE,D0
0000108C  2040                     265              MOVE.L  D0,A0
0000108E  201F                     266              MOVE.L  (A7)+,D0
00001090  60DA                     267              BRA     DMMFCOM
00001092                           268  
00001092                           269  ; -----------------------------------------------------------------------------
00001092                           270  DMMALLOC
00001092                           271  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001092                           272  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001092                           273  ; INPUT    - D0.W : ID TO ASSIGN
00001092                           274  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001092                           275  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001092                           276  ; -----------------------------------------------------------------------------
00001092  3F00                     277              MOVE.W  D0,-(A7)
00001094  4240                     278              CLR.W   D0
00001096  4EB8 105A                279              JSR     DMMFRSTO
0000109A  301F                     280              MOVE.W  (A7)+,D0
0000109C  B1FC 00000000            281              CMP.L   #0,A0
000010A2  6700 0006                282              BEQ     .END
000010A6  3140 FFFE                283              MOVE.W  D0,-2(A0)
000010AA  4E75                     284  .END        RTS
000010AC                           285  
000010AC                           286  ; -----------------------------------------------------------------------------
000010AC                           287  DMMFREE
000010AC                           288  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000010AC                           289  ; SYSTEM (0)
000010AC                           290  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000010AC                           291  ; OUTPUT   - NONE
000010AC                           292  ; MODIFIES - NONE
000010AC                           293  ; -----------------------------------------------------------------------------
000010AC  48E7 8080                294              MOVEM.L D0/A0,-(A7)
000010B0  2008                     295              MOVE.L  A0,D0
000010B2  C0BC FFFFFFC0            296              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000010B8  2040                     297              MOVE.L  D0,A0
000010BA  4250                     298              CLR.W   (A0)
000010BC  4CDF 0101                299              MOVEM.L (A7)+,D0/A0
000010C0  4E75                     300              RTS
000010C0  4E75                     301  -------------------- end include --------------------
000010C2                           302      INCLUDE "SYSTEM.X68"
000010C2                           303  
000010C2                           304  ; ----------------------------------------------------------
000010C2                           305  SYSINIT
000010C2                           306  ; INITIALIZE SYSTEM
000010C2                           307  ; INPUT     : NONE
000010C2                           308  ; OUTPUT    : NONE
000010C2                           309  ; MODIFIES  : NONE
000010C2                           310  ; ----------------------------------------------------------
000010C2                           311              
000010C2  21FC 00001242 0080       312              MOVE.L  #SCRPLOT,($80+SCRUPTN*4)
000010CA  21FC 00001278 0084       313              MOVE.L  #KBDUPD,($80+KBDUPTN*4) 
000010D2  21FC 000011EC 008C       314              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
000010DA  21FC 0000125C 0064       315              MOVE.L  #SCRTIM,($60+SCRINTN*4) ; INTERRUPCIÓN DE TIPO 1
000010E2                           316              
000010E2  4EB9 000011FE            317              JSR     SCRINIT
000010E8  4EB9 0000126A            318              JSR     KBDINIT
000010EE                           319              ;JSR     MOUINIT
000010EE  4EB9 00001100            320              JSR     SNDINIT
000010F4  4EB8 1000                321              JSR     DMMINIT
000010F8                           322              
000010F8  40E7                     323              MOVE.W  SR,-(A7)
000010FA  0257 D8FF                324              ANDI.W  #$D8FF,(A7) ; MODO USUARIO Y HABILITAR INTERRUPCIONES
000010FE  4E73                     325              RTE
00001100                           326  
00001100                           327  ; ----------------------------------------------------------            
00001100                           328  SNDINIT
00001100                           329  ; SOUND SYSTEM INIT
00001100                           330  ; INPUT     : NONE
00001100                           331  ; OUTPUT    : NONE
00001100                           332  ; MODIFIES  : NONE
00001100                           333  ; ----------------------------------------------------------
00001100                           334  
00001100  48E7 C0C0                335              MOVEM.L D0-D1/A0-A1,-(A7)
00001104                           336  
00001104  4201                     337              CLR.B   D1
00001106  41F9 000011BC            338              LEA     .SNDLIST,A0
0000110C  2018                     339  .LOOP       MOVE.L  (A0)+,D0    ; SI HICIESEMOS MOVEA (PASAR DE A0 A A1 DIRECTAMENTE) NO ACTUALIZARÍA EL FLAG Z
0000110E  6700 000E                340              BEQ     .DONE
00001112  2240                     341              MOVE.L  D0,A1
00001114  103C 0047                342              MOVE.B  #71,D0
00001118  4E4F                     343              TRAP    #15
0000111A  5201                     344              ADDQ.B  #1,D1
0000111C  60EE                     345              BRA     .LOOP
0000111E  4CDF 0303                346  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1   
00001122  4E75                     347              RTS
00001124= 53 4E 44 2F 49 4E ...    348  .SNDINTRO   DC.B    'SND/INTRO.wav',0
00001132= 53 4E 44 2F 49 4E ...    349  .SNDINSTR   DC.B    'SND/INSTR.wav',0
00001140= 53 4E 44 2F 57 41 ...    350  .SNDWALL    DC.B    'SND/WALL.wav',0
0000114D= 53 4E 44 2F 48 49 ...    351  .SNDHIT     DC.B    'SND/HIT.wav',0
00001159= 53 4E 44 2F 45 4E ...    352  .SNDKILL    DC.B    'SND/ENEMKILL.wav',0
0000116A= 53 4E 44 2F 57 41 ...    353  .SNDWAA     DC.B    'SND/WAA.wav',0
00001176= 53 4E 44 2F 42 55 ...    354  .SNDBULEX   DC.B    'SND/BULEXP.wav',0
00001185= 53 4E 44 2F 44 49 ...    355  .SNDDISP    DC.B    'SND/DISP.wav',0
00001192= 53 4E 44 2F 47 4F ...    356  .SNDGVR1    DC.B    'SND/GOVER1.wav',0
000011A1= 53 4E 44 2F 47 4F ...    357  .SNDGVR2    DC.B    'SND/GOVER2.wav',0
000011B0= 53 4E 44 2F 57 49 ...    358  .SNDWIN     DC.B    'SND/WIN.wav',0
000011BC                           359              DS.W   0
000011BC= 00001124 00001132 ...    360  .SNDLIST    DC.L    .SNDINTRO,.SNDINSTR,.SNDWALL,.SNDHIT,.SNDKILL,.SNDWAA,.SNDBULEX,.SNDDISP,.SNDGVR1,.SNDGVR2,.SNDWIN,0
000011EC                           361              
000011EC                           362  ; ----------------------------------------------------------
000011EC                           363  SNDPLAY
000011EC                           364  ; PLAY SOUND
000011EC                           365  ; INPUT     : D7 SOUND ID
000011EC                           366  ; OUTPUT    : NONE
000011EC                           367  ; MODIFIES  : NONE
000011EC                           368  ; ----------------------------------------------------------
000011EC  48A7 C000                369              MOVEM.W D0-D1,-(A7)
000011F0  103C 0048                370              MOVE.B  #72,D0
000011F4  1207                     371              MOVE.B  D7,D1
000011F6  4E4F                     372              TRAP    #15
000011F8  4C9F 0003                373              MOVEM.W (A7)+,D0-D1
000011FC  4E73                     374              RTE
000011FE                           375              
000011FE                           376  ; ----------------------------------------------------------
000011FE                           377  SCRINIT
000011FE                           378  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
000011FE                           379  ; ENABLE DOUBLE BUFFER, ENABLE TIMED INTERRUPT
000011FE                           380  ; INPUT     : NONE
000011FE                           381  ; OUTPUT    : NONE
000011FE                           382  ; MODIFIES  : NONE
000011FE                           383  ; ----------------------------------------------------------
000011FE                           384              
000011FE  48E7 C000                385              MOVEM.L D0-D1,-(A7)
00001202                           386  
00001202                           387              ; SET SCREEN RESOLUTION
00001202  103C 0021                388              MOVE.B  #33,D0
00001206  223C 028001E0            389              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
0000120C  4E4F                     390              TRAP    #15
0000120E                           391              
0000120E                           392              ; SET WINDOWED MODE
0000120E  7201                     393              MOVE.L  #1,D1
00001210  4E4F                     394              TRAP    #15
00001212                           395              
00001212                           396              ; CLEAR SCREEN
00001212  103C 000B                397              MOVE.B  #11,D0
00001216  323C FF00                398              MOVE.W  #$FF00,D1
0000121A  4E4F                     399              TRAP    #15
0000121C                           400              
0000121C                           401              ; ENABLE DOUBLE BUFFER
0000121C  103C 005C                402              MOVE.B  #92,D0
00001220  123C 0011                403              MOVE.B  #17,D1
00001224  4E4F                     404              TRAP    #15
00001226                           405              
00001226                           406              ; ENABLE TIMED INTERRUPT
00001226  103C 0020                407              MOVE.B  #32,D0
0000122A  123C 0006                408              MOVE.B  #6,D1
0000122E  143C 0081                409              MOVE.B  #$80|SCRINTN,D2 ; BIT 7 = 1 TO ENABLE INDIVIDUAL IRQ, BITS 6-0 = NUMBER OF INTERRUPT (1)
00001232  7614                     410              MOVE.L  #1000/SCRFPS,D3
00001234  4E4F                     411              TRAP    #15
00001236                           412              
00001236                           413              ; CLEAR INTERRUPT COUNTER
00001236  4239 00002C97            414              CLR.B   (SCRINTCT)   
0000123C                           415              
0000123C  4CDF 0003                416              MOVEM.L (A7)+,D0-D1
00001240                           417              
00001240  4E75                     418              RTS
00001242                           419              
00001242                           420  ; ----------------------------------------------------------
00001242                           421  SCRPLOT
00001242                           422  ; UPDATE DOUBLE BUFFER
00001242                           423  ; INPUT     : NONE
00001242                           424  ; OUTPUT    : NONE
00001242                           425  ; MODIFIES  : NONE
00001242                           426  ; ----------------------------------------------------------
00001242  48A7 C000                427              MOVEM.W D0-D1,-(A7)
00001246                           428              ; SWITCH BUFFERS
00001246  103C 005E                429              MOVE.B  #94,D0
0000124A  4E4F                     430              TRAP    #15
0000124C                           431              
0000124C                           432              ; CLEAR HIDDEN BUFFER
0000124C  103C 000B                433              MOVE.B  #11,D0
00001250  323C FF00                434              MOVE.W  #$FF00,D1
00001254  4E4F                     435              TRAP    #15 
00001256  4C9F 0003                436              MOVEM.W (A7)+,D0-D1
0000125A                           437              
0000125A  4E73                     438              RTE
0000125C                           439  
0000125C                           440  ; ----------------------------------------------------------            
0000125C                           441  SCRTIM
0000125C                           442  ; TIMED INTERRUPT SERVICE ROUTINE
0000125C                           443  ; INPUT    : NONE
0000125C                           444  ; OUTPUT   : NONE
0000125C                           445  ; MODIFIES : NONE
0000125C                           446  ; ----------------------------------------------------------
0000125C                           447              
0000125C  5239 00002C97            448              ADDQ.B  #1,(SCRINTCT)
00001262  5239 00002C98            449              ADDQ.B  #1,(SCRCYCCT)
00001268  4E73                     450              RTE
0000126A                           451              
0000126A                           452  ; ----------------------------------------------------------
0000126A                           453  KBDINIT
0000126A                           454  ; INIT KEYBARD
0000126A                           455  ; INPUT     : NONE
0000126A                           456  ; OUTPUT    : NONE
0000126A                           457  ; MODIFIES  : NONE
0000126A                           458  ; ----------------------------------------------------------
0000126A  4239 00002C92            459              CLR.B   (KBDVAL)
00001270  4239 00002C93            460              CLR.B   (KBDEDGE)
00001276  4E75                     461              RTS
00001278                           462              
00001278                           463  ; ----------------------------------------------------------
00001278                           464  KBDUPD
00001278                           465  ; UPDATE KEYBOARD INFO
00001278                           466  ; 7 ->
00001278                           467  ; 6 ->
00001278                           468  ; 5 -> PAUSE
00001278                           469  ; 4 -> FIRE
00001278                           470  ; 3 -> DOWN
00001278                           471  ; 2 -> RIGHT
00001278                           472  ; 1 -> UP
00001278                           473  ; 0 -> LEFT
00001278                           474  ; INPUT     : NONE
00001278                           475  ; OUTPUT    : NONE
00001278                           476  ; MODIFIES  : NONE
00001278                           477  ; ----------------------------------------------------------
00001278                           478              
00001278  48E7 F000                479              MOVEM.L D0-D3,-(A7)
0000127C                           480  
0000127C                           481              ; READ FIRST PART
0000127C  103C 0013                482              MOVE.B  #19,D0
00001280  223C 00005020            483              MOVE.L  #KBDPAUSE<<8|KBDFIRE,D1
00001286  4E4F                     484              TRAP    #15
00001288                           485              
00001288                           486              ; CONVERT TO DESIRED FORMAT
00001288  4EB9 000012B8            487              JSR     .PACK
0000128E                           488              
0000128E                           489              ; READ SECOND PART
0000128E  223C 53445741            490              MOVE.L  #KBDDOWN<<24|KBDRIGHT<<16|KBDUP<<8|KBDLEFT,D1
00001294  4E4F                     491              TRAP    #15
00001296                           492              
00001296                           493              ; CONVERT TO DESIRED FORMAT
00001296  4EB9 000012B8            494              JSR     .PACK
0000129C                           495              
0000129C                           496              ; COMPUTE KBDEDGE
0000129C  1039 00002C92            497              MOVE.B  (KBDVAL),D0
000012A2  4600                     498              NOT.B   D0
000012A4  C002                     499              AND.B   D2,D0       ; KBDVAL NUEVO AND KBDVAL ANTERIOR NEGADO
000012A6  13C0 00002C93            500              MOVE.B  D0,(KBDEDGE)
000012AC                           501              
000012AC                           502              ; STORE KBDVAL
000012AC  13C2 00002C92            503              MOVE.B  D2,(KBDVAL)
000012B2                           504              
000012B2  4CDF 000F                505              MOVEM.L (A7)+,D0-D3
000012B6                           506              
000012B6  4E73                     507              RTE
000012B8                           508              
000012B8  363C 0003                509  .PACK       MOVE.W  #3,D3
000012BC  E189                     510  .LOOP       LSL.L   #8,D1
000012BE  E312                     511              ROXL.B  #1,D2
000012C0  51CB FFFA                512              DBRA.W  D3,.LOOP
000012C4  4E75                     513              RTS
000012C6                           514              
000012C6                           515  
000012C6                           516  ; ----------------------------------------------------------
000012C6                           517  MOUINIT
000012C6                           518  ; INIT MOUSE
000012C6                           519  ; INPUT     : NONE
000012C6                           520  ; OUTPUT    : NONE
000012C6                           521  ; MODIFIES  : NONE
000012C6                           522  ; ----------------------------------------------------------
000012C6  42B9 00002C96            523              CLR.L   (MOUPOS)
000012CC  4279 00002C95            524              CLR.W   (MOUBUT)
000012D2  4E75                     525              RTS
000012D4                           526              
000012D4                           527  ; ----------------------------------------------------------
000012D4                           528  MOUUPD
000012D4                           529  ; INIT MOUSE
000012D4                           530  ; INPUT     : NONE
000012D4                           531  ; OUTPUT    : NONE
000012D4                           532  ; MODIFIES  : NONE
000012D4                           533  ; ----------------------------------------------------------
000012D4                           534  
000012D4  48E7 C000                535              MOVEM.L D0-D1,-(A7)
000012D8  103C 003D                536              MOVE.B  #61,D0
000012DC  4201                     537              CLR.B   D1
000012DE  4E4F                     538              TRAP    #15
000012E0  23C1 00002C96            539              MOVE.L  D1,(MOUPOS)
000012E6  1239 00002C95            540              MOVE.B  (MOUBUT),D1
000012EC  13C0 00002C95            541              MOVE.B  D0,(MOUBUT)
000012F2  4601                     542              NOT.B   D1
000012F4  C001                     543              AND.B   D1,D0
000012F6  13C0 00002C94            544              MOVE.B  D0,(MOUEDGE)
000012FC  4CDF 0003                545              MOVEM.L (A7)+,D0-D1
00001300  4E73                     546              RTE
00001302                           547  
00001302                           548  
00001302                           549  
00001302                           550  
00001302                           551  
00001302                           552  
00001302                           553  
00001302                           554  
00001302                           555  
00001302                           556  
00001302                           557  
00001302                           558  -------------------- end include --------------------
00001302                           559      INCLUDE "LIB/AGLCODE.X68"
00001302                           560  ; =============================================================================
00001302                           561  ; AGENT MANAGEMENT
00001302                           562  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
00001302                           563  ; +0 - LONG : UPDATE SUBROUTINE POINTER
00001302                           564  ; +4 - LONG : PLOT SUBROUTINE POINTER
00001302                           565  ; +8:END    : DATA (AGENT SPECIFIC)
00001302                           566  ; =============================================================================
00001302                           567  
00001302                           568  ; -----------------------------------------------------------------------------
00001302                           569  AGLADD
00001302                           570  ; CREATES A NEW AGENT
00001302                           571  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
00001302                           572  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
00001302                           573  ;            A3 - POINTER TO AGENT PLOT FUNCTION
00001302                           574  ;            D0 - AGENT TYPE (USED AS OWNED BY DMM) - MUST NOT BE ZERO
00001302                           575  ;            D1 - AGENT INITIALIZATION PARAMETER 1
00001302                           576  ;            D2 - AGENT INITIALIZATION PARAMETER 2
00001302                           577  ;            D3 - AGENT INITIALIZATION PARAMETER 3
00001302                           578  ; OUTPUT   - NONE
00001302                           579  ; MODIFIES - NONE
00001302                           580  ; -----------------------------------------------------------------------------
00001302  2F08                     581              MOVE.L  A0,-(A7)
00001304  4EB8 1092                582              JSR     DMMALLOC
00001308  B1FC 00000000            583              CMP.L   #0,A0
0000130E  6700 0008                584              BEQ     .END
00001312  20CA                     585              MOVE.L  A2,(A0)+
00001314  20CB                     586              MOVE.L  A3,(A0)+
00001316  4E91                     587              JSR     (A1)
00001318  205F                     588  .END        MOVE.L  (A7)+,A0
0000131A  4E75                     589              RTS
0000131C                           590  
0000131C                           591  ; -----------------------------------------------------------------------------
0000131C                           592  AGLUPD
0000131C                           593  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
0000131C                           594  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
0000131C                           595  ; INPUT    - NONE
0000131C                           596  ; OUTPUT   - NONE
0000131C                           597  ; MODIFIES - NONE
0000131C                           598  ; -----------------------------------------------------------------------------
0000131C  48E7 00C0                599              MOVEM.L A0-A1,-(A7)
00001320  4EB8 1022                600              JSR     DMMFIRST
00001324  B1FC 00000000            601  .LOOP       CMP.L   #0,A0
0000132A  6700 000E                602              BEQ     .END
0000132E  2250                     603              MOVE.L  (A0),A1
00001330  5088                     604              ADD.L   #8,A0
00001332  4E91                     605              JSR     (A1)
00001334  4EB8 1044                606              JSR     DMMNEXT
00001338  60EA                     607              BRA     .LOOP
0000133A  4CDF 0300                608  .END        MOVEM.L (A7)+,A0-A1
0000133E  4E75                     609              RTS
00001340                           610  
00001340                           611  ; -----------------------------------------------------------------------------
00001340                           612  AGLPLOT
00001340                           613  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001340                           614  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001340                           615  ; INPUT    - NONE
00001340                           616  ; OUTPUT   - NONE
00001340                           617  ; MODIFIES - NONE
00001340                           618  ; -----------------------------------------------------------------------------
00001340  48E7 00C0                619              MOVEM.L A0-A1,-(A7)
00001344  4EB8 1022                620              JSR     DMMFIRST
00001348  B1FC 00000000            621  .LOOP       CMP.L   #0,A0
0000134E  6700 0010                622              BEQ     .END
00001352  2268 0004                623              MOVE.L  4(A0),A1
00001356  5088                     624              ADD.L   #8,A0
00001358  4E91                     625              JSR     (A1)
0000135A  4EB8 1044                626              JSR     DMMNEXT
0000135E  60E8                     627              BRA     .LOOP
00001360  4CDF 0300                628  .END        MOVEM.L (A7)+,A0-A1
00001364  4E75                     629              RTS
00001366                           630  
00001366                           631  ; -----------------------------------------------------------------------------
00001366  =000010AC                632  AGLKILL     EQU     DMMFREE
00001366                           633  ; KILLS THE AGENT BY RELEASING ITS MEMORY
00001366                           634  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
00001366                           635  ; OUTPUT   - NONE
00001366                           636  ; MODIFIES - NONE
00001366                           637  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
00001366                           638  ; -----------------------------------------------------------------------------
00001366                           639  -------------------- end include --------------------
00001366                           640      INCLUDE "LIB/UTLCODE.X68"
00001366                           641  ; =============================================================================
00001366                           642  ; UTILITY MACROS
00001366                           643  ; =============================================================================
00001366                           644  
00001366                           645  ; -----------------------------------------------------------------------------
00001366                           646  UTLSPEN     MACRO
00001366                           647  ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001366                           648  ; INPUT    - \1 COLOR IN FORMAT $00BBGGRR
00001366                           649  ; OUTPUT   - NONE
00001366                           650  ; MODIFIES - D0,D1
00001366                           651  ; -----------------------------------------------------------------------------
00001366                           652              MOVE.B  #80,D0
00001366                           653              MOVE.L  \1,D1
00001366                           654              TRAP    #15
00001366                           655              ENDM
00001366                           656  
00001366                           657  ; -----------------------------------------------------------------------------
00001366                           658  UTLSFIL     MACRO
00001366                           659  ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001366                           660  ; INPUT    - \1 COLOR IN FORMAT $00BBGGRR
00001366                           661  ; OUTPUT   - NONE
00001366                           662  ; MODIFIES - D0,D1
00001366                           663  ; -----------------------------------------------------------------------------
00001366                           664              MOVE.B  #81,D0
00001366                           665              MOVE.L  \1,D1
00001366                           666              TRAP    #15
00001366                           667              ENDM
00001366                           668  
00001366                           669  
00001366                           670  ; =============================================================================
00001366                           671  ; UTILITY CODE
00001366                           672  ; =============================================================================
00001366                           673  
00001366                           674  ; -----------------------------------------------------------------------------
00001366                           675  UTLINIT
00001366                           676  ; INITIALIZES UTILITY CODE
00001366                           677  ; INPUT    - NONE
00001366                           678  ; OUTPUT   - NONE
00001366                           679  ; MODIFIES - NONE
00001366                           680  ; -----------------------------------------------------------------------------
00001366  48E7 C000                681              MOVEM.L D0-D1,-(A7)
0000136A  103C 0008                682              MOVE.B  #8,D0
0000136E  4E4F                     683              TRAP    #15
00001370  13C1 00002C90            684              MOVE.B  D1,(UTLRNDIX)
00001376  4CDF 0003                685              MOVEM.L (A7)+,D0-D1
0000137A  4E75                     686              RTS
0000137C                           687   
0000137C                           688  ; -----------------------------------------------------------------------------
0000137C                           689  UTLPRINT
0000137C                           690  ; PRINT SCREEN CENTERED TEXT
0000137C                           691  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000137C                           692  ;            D0.B SCREEN ROW TO PRINT TEXT
0000137C                           693  ; OUTPUT   : D0.B NEXT ROW
0000137C                           694  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000137C                           695  ; -----------------------------------------------------------------------------
0000137C  48E7 C0C0                696              MOVEM.L D0-D1/A0-A1,-(A7)
00001380  4201                     697              CLR.B   D1
00001382  2248                     698              MOVE.L  A0,A1
00001384  4A18                     699  .LOOP       TST.B   (A0)+
00001386  6700 0006                700              BEQ     .ENDLOOP
0000138A  5201                     701              ADDQ.B  #1,D1
0000138C  60F6                     702              BRA     .LOOP
0000138E  E209                     703  .ENDLOOP    LSR.B   #1,D1                   ; DIVIDIR D1 ENTRE 2
00001390  0401 0028                704              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
00001394  4401                     705              NEG.B   D1
00001396  E141                     706              ASL.W   #8,D1
00001398  8240                     707              OR.W    D0,D1
0000139A  103C 000B                708              MOVE.B  #11,D0
0000139E  4E4F                     709              TRAP    #15
000013A0  103C 000D                710              MOVE.B  #13,D0
000013A4  4E4F                     711              TRAP    #15          
000013A6  4CDF 0303                712              MOVEM.L (A7)+,D0-D1/A0-A1
000013AA  5200                     713              ADDQ.B  #1,D0
000013AC  4E75                     714              RTS
000013AE                           715              
000013AE                           716  ; -----------------------------------------------------------------------------
000013AE                           717  UTLCHCOL
000013AE                           718  ; CHECKS COLLISION
000013AE                           719  ; INPUT    - D0.W X0 COORDINATE
000013AE                           720  ;            D1.W Y0 COORDINATE
000013AE                           721  ;            D2.W X1 COORDINATE
000013AE                           722  ;            D3.W Y1 COORDINATE
000013AE                           723  ;            D4.W WIDTH 0
000013AE                           724  ;            D5.W WIDTH 1
000013AE                           725  ;            D6.W HEIGHT 0
000013AE                           726  ;            D7.W HEIGHT 1
000013AE                           727  ; OUTPUT   - D0.B=FF - COLLISION, =0 - NO COLLISION
000013AE                           728  ; MODIFIES - NONE
000013AE                           729  ; -----------------------------------------------------------------------------
000013AE  48A7 0F00                730              MOVEM.W D4-D7,-(A7)
000013B2  D840                     731              ADD.W   D0,D4
000013B4  B842                     732              CMP.W   D2,D4
000013B6  6F00 0022                733              BLE     .NOCOL
000013BA  DA42                     734              ADD.W   D2,D5
000013BC  BA40                     735              CMP.W   D0,D5
000013BE  6F00 001A                736              BLE     .NOCOL
000013C2  DC41                     737              ADD.W   D1,D6
000013C4  BC43                     738              CMP.W   D3,D6
000013C6  6F00 0012                739              BLE     .NOCOL
000013CA  DE43                     740              ADD.W   D3,D7
000013CC  BE41                     741              CMP.W   D1,D7
000013CE  6F00 000A                742              BLE     .NOCOL
000013D2  103C 00FF                743              MOVE.B  #$FF,D0
000013D6  6000 0004                744              BRA     .END
000013DA  4200                     745  .NOCOL      CLR.B   D0
000013DC  4C9F 00F0                746  .END        MOVEM.W (A7)+,D4-D7
000013E0  4E75                     747              RTS
000013E2                           748              
000013E2                           749  ; -----------------------------------------------------------------------------
000013E2                           750  UTLRAND
000013E2                           751  ; PROVIDES A PSEUDO-RANDOM BYTE
000013E2                           752  ; INPUT    - NONE
000013E2                           753  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
000013E2                           754  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000013E2                           755  ; -----------------------------------------------------------------------------
000013E2  2F08                     756              MOVE.L  A0,-(A7)
000013E4  41F9 00001400            757              LEA     .RANDVEC,A0
000013EA  4280                     758              CLR.L   D0
000013EC  1039 00002C90            759              MOVE.B  (UTLRNDIX),D0
000013F2  1030 0800                760              MOVE.B  (A0,D0.L),D0
000013F6  5239 00002C90            761              ADDQ.B  #1,(UTLRNDIX)
000013FC  205F                     762              MOVE.L  (A7)+,A0
000013FE  4E75                     763              RTS
00001400                           764  
00001400                           765  
00001400= A2 EE 9A 0C F5 24 ...    766  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
00001408= 2A A3 51 26 E0 AC ...    767              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
00001410= 75 51 CA FD 33 EB ...    768              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
00001418= 60 CC E7 B8 9A EB ...    769              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
00001420= 1D 76 B5 95 B0 89 ...    770              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
00001428= 39 15 48 C9 6E CA ...    771              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
00001430= 43 E7 E2 7C 37 25 ...    772              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
00001438= E9 94 CE E9 E4 52 ...    773              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
00001440= 37 6D 9A 84 A2 28 ...    774              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
00001448= 19 E2 C6 77 80 D4 ...    775              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
00001450= 0A 5A 32 67 33 C2 ...    776              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
00001458= 59 80 DC 0E 57 FC ...    777              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
00001460= 8A AB BC F7 07 4D ...    778              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001468= EF D5 77 6E 1E BB ...    779              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
00001470= D6 E0 2A 8F BD 28 ...    780              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001478= 13 4F 66 EC 0A 64 ...    781              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
00001480= 56 52 9A 16 9B 90 ...    782              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001488= 06 8A A4 F7 01 DA ...    783              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
00001490= F2 E7 77 28 B1 76 ...    784              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001498= A4 42 E3 81 B1 67 ...    785              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
000014A0= BF CE FA 16 BF 38 ...    786              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
000014A8= D1 8B 50 0C 5F 49 ...    787              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
000014B0= DE 4C 14 A2 40 DC ...    788              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
000014B8= B6 9B 0A 38 5D AB ...    789              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
000014C0= E2 1B DD 75 15 82 ...    790              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
000014C8= 8A 26 51 30 9F 47 ...    791              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
000014D0= 1E 8A BB 71 C6 6E ...    792              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
000014D8= 9F 47 E5 34 94 27 ...    793              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
000014E0= 7D 06 D6 BA 30 0F ...    794              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
000014E8= EC 7F 7E 03 CF 2D ...    795              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
000014F0= 94 5B 23 F2 8B CD ...    796              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
000014F8= 74 33 EC B9 0F D5 ...    797              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001500                           798              
00001500                           799  
00001500                           800  
00001500                           801  
00001500                           802  -------------------- end include --------------------
00001500                           803      INCLUDE "BULLET.X68"
00001500                           804  
00001500                           805  ; ----------------------------------------------------------
00001500                           806  BULINIT
00001500                           807  ; INITIALITZE BULLET
00001500                           808  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
00001500                           809  ; OUTPUT    : NONE
00001500                           810  ; MODIFIES  : NONE
00001500                           811  ; ----------------------------------------------------------
00001500                           812              
00001500                           813              ; PARA QUE LA BALA NO APAREZCA ENCIMA DEL TANQUE (modificar para que sea hacia donde apunta)
00001500  0641 0014                814              ADD.W   #20,D1
00001504  0642 0014                815              ADD.W   #20,D2
00001508                           816              ; BALA SPAWNEA DONDE EL TANQUE QUE LA GENERA
00001508  3081                     817              MOVE.W  D1,(A0) 
0000150A  3142 0002                818              MOVE.W  D2,2(A0)
0000150E                           819              ; GUARDAMOS EL ID DEL PADRE DE LA BALA
0000150E  3143 0008                820              MOVE.W  D3,8(A0)
00001512                           821              ; TOQUES DE LA BALA DISPONIBLES CON LAS PAREDES EMPIEZAN SIENDO EL MÁXIMO
00001512  317C 0004 000A           822              MOVE.W  #MAXTOUCH,10(A0)
00001518                           823              
00001518  317C 0004 0004           824              MOVE.W  #BULSPEED,4(A0)             ; hacer que bulspeed sea variable y que sea 0 o el bulspeed actual (para que se mueva en 8 direcciones)
0000151E  317C 0004 0006           825              MOVE.W  #BULSPEED,6(A0)
00001524  4E75                     826              RTS
00001526                           827              
00001526                           828  ; ----------------------------------------------------------
00001526                           829  BULUPD
00001526                           830  ; UPDATE THE BULLET
00001526                           831  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
00001526                           832  ; OUTPUT    : NONE
00001526                           833  ; MODIFIES  : NONE
00001526                           834  ; ----------------------------------------------------------
00001526                           835              
00001526  48A7 F800                836              MOVEM.W D0-D4,-(A7)            
0000152A                           837  
0000152A                           838              ; UPDATE BALL COORDINATES
0000152A  3010                     839              MOVE.W  (A0),D0
0000152C  3228 0002                840              MOVE.W  2(A0),D1
00001530  D068 0004                841              ADD.W   4(A0),D0
00001534  D268 0006                842              ADD.W   6(A0),D1
00001538                           843              
00001538                           844              ;INICIALIZAMOS
00001538  43F9 00001BFE            845              LEA.L   MAPDATA,A1
0000153E                           846              ;SUBQ.L  #2,A1
0000153E  3800                     847              MOVE.W  D0,D4
00001540  3A01                     848              MOVE.W  D1,D5
00001542  343C 0000                849              MOVE.W  #0,D2
00001546  363C 0000                850              MOVE.W  #0,D3
0000154A                           851              
0000154A                           852              ;SACAMOS LA POSICIÓN RELATIVA DE X
0000154A  6000 000C                853              BRA .CHKX
0000154E                           854  .NOORGX
0000154E  0444 0020                855              SUB.W   #PIESIZX,D4
00001552  5489                     856              ADDQ.L  #2,A1
00001554  0642 0020                857              ADD.W   #PIESIZX,D2
00001558                           858  .CHKX            
00001558  B87C 0020                859              CMP.W   #PIESIZX,D4
0000155C  6EF0                     860              BGT     .NOORGX             
0000155E                           861              
0000155E                           862              ;SACAMOS LA POSICIÓN RELATIVA DE Y
0000155E  6000 0010                863              BRA .CHKY
00001562                           864  .NOORGY
00001562  0445 0020                865              SUB.W   #PIESIZY,D5
00001566  D3FC 00000028            866              ADD.L   #40,A1
0000156C  0643 0020                867              ADD.W   #PIESIZY,D3
00001570                           868  .CHKY            
00001570  BA7C 0020                869              CMP.W   #PIESIZX,D5
00001574  6EEC                     870              BGT     .NOORGY
00001576                           871              
00001576                           872              ; CHECK HORIZONTAL COLLISIONS
00001576  B87C 001E                873              CMP.W   #PIESIZX-BULRAD/2,D4
0000157A  6C00 001E                874              BGE     .COLRGT
0000157E                           875  .RECX
0000157E  B87C 0006                876              CMP.W   #BULRAD+2,D4            
00001582  6D00 0048                877              BLT     .COLLFT                 
00001586                           878  
00001586                           879              ; CHECK VERTICAL COLLISIONS
00001586  BA7C 001E                880  .CHKVERT    CMP.W   #PIESIZY-BULRAD/2,D5
0000158A  6C00 0072                881              BGE     .COLBOT
0000158E                           882  .RECY            
0000158E  BA7C 0006                883              CMP.W   #BULRAD+2,D5
00001592  6D00 00A0                884              BLT     .COLTOP                
00001596  6000 0112                885              BRA     .CHKTAN   
0000159A                           886  
0000159A                           887              ; RIGHT SIDE COLLISION    
0000159A                           888  .COLRGT     
0000159A  5489                     889              ADDQ.L  #2,A1
0000159C  0C51 0001                890              CMP.W   #$01,(A1)
000015A0  6600 0026                891              BNE     .FARSC
000015A4  303C 001C                892              MOVE.W  #PIESIZX-BULRAD,D0
000015A8  D042                     893              ADD.W   D2,D0
000015AA  4468 0004                894              NEG.W   4(A0)
000015AE  5368 000A                895              SUBQ.W  #1,10(A0)
000015B2  0C68 0000 000A           896              CMP.W   #0,10(A0)
000015B8  6600 00F0                897              BNE     .BULWALL
000015BC  3628 0008                898              MOVE.W  8(A0),D3
000015C0  4EB8 10AC                899              JSR     AGLKILL
000015C4  6000 00A0                900              BRA     .BULFACHK  
000015C8                           901  .FARSC
000015C8  5589                     902              SUBQ.L  #2,A1
000015CA  60B2                     903              BRA     .RECX
000015CC                           904  
000015CC                           905              ; LEFT SIDE COLLISION
000015CC                           906  .COLLFT     
000015CC  5589                     907              SUBQ.L  #2,A1
000015CE  0C51 0001                908              CMP.W   #$01,(A1)
000015D2  6600 0026                909              BNE     .FALSC
000015D6  303C 0004                910              MOVE.W  #BULRAD,D0
000015DA  D042                     911              ADD.W   D2,D0
000015DC  4468 0004                912              NEG.W   4(A0) 
000015E0  5368 000A                913              SUBQ.W  #1,10(A0)  
000015E4  0C68 0000 000A           914              CMP.W   #0,10(A0)
000015EA  6600 00BE                915              BNE     .BULWALL
000015EE  3628 0008                916              MOVE.W  8(A0),D3
000015F2                           917  
000015F2  4EB8 10AC                918              JSR     AGLKILL
000015F6  6000 006E                919              BRA     .BULFACHK            
000015FA                           920                  
000015FA                           921  .FALSC
000015FA  5489                     922              ADDQ.L  #2,A1
000015FC  6088                     923              BRA     .CHKVERT  
000015FE                           924  
000015FE                           925              ; BOTTOM COLLISION
000015FE                           926  .COLBOT     
000015FE  D3FC 00000028            927              ADD.L   #40,A1
00001604  0C51 0001                928              CMP.W   #$01,(A1)
00001608  6600 0026                929              BNE     .FABSC
0000160C  323C 001C                930              MOVE.W  #PIESIZY-BULRAD,D1
00001610  D243                     931              ADD.W   D3,D1
00001612  4468 0006                932              NEG.W   6(A0)
00001616  5368 000A                933              SUBQ.W  #1,10(A0)
0000161A  0C68 0000 000A           934              CMP.W   #0,10(A0)
00001620  6600 0088                935              BNE     .BULWALL
00001624  3628 0008                936              MOVE.W  8(A0),D3
00001628                           937  
00001628  4EB8 10AC                938              JSR     AGLKILL
0000162C  6000 0038                939              BRA     .BULFACHK
00001630                           940  .FABSC
00001630                           941              ;SUB.L   #40,A1            
00001630  6000 FF5C                942              BRA     .RECY
00001634                           943  
00001634                           944              ; TOP COLLISION
00001634                           945  .COLTOP     
00001634  93FC 00000028            946              SUB.L   #40,A1
0000163A  0C51 0001                947              CMP.W   #$01,(A1)
0000163E  6600 006A                948              BNE     .CHKTAN
00001642  323C 0004                949              MOVE.W  #BULRAD,D1
00001646  D243                     950              ADD.W   D3,D1         
00001648  4468 0006                951              NEG.W   6(A0)
0000164C  5368 000A                952              SUBQ.W  #1,10(A0)
00001650  0C68 0000 000A           953              CMP.W   #0,10(A0)
00001656  6600 0052                954              BNE     .BULWALL
0000165A  3628 0008                955              MOVE.W  8(A0),D3
0000165E                           956  
0000165E  4EB8 10AC                957              JSR     AGLKILL
00001662  6000 0002                958              BRA     .BULFACHK
00001666                           959  
00001666  4244                     960  .BULFACHK   CLR.W   D4              ; CONTADOR
00001668  303C 0003                961              MOVE.W  #TANENEM,D0
0000166C  4EB8 105A                962              JSR     DMMFRSTO
00001670  B1FC 00000000            963  .LOOP31     CMP.L   #0,A0
00001676  6700 0018                964              BEQ     .CHKPLAY2
0000167A  5244                     965              ADDQ.W  #1,D4
0000167C  B843                     966              CMP.W   D3,D4
0000167E  6600 000A                967              BNE     .LOOP32
00001682  5268 001A                968              ADDQ.W  #1,26(A0)       ; AGREGAR UNA BALA DISPONIBLE AL TANQUE SI ES EL PADRE ; no llega aquí?
00001686  6000 001C                969              BRA     .ENDCOLEX
0000168A  4EB8 107C                970  .LOOP32     JSR     DMMNEXTO
0000168E  60E0                     971              BRA     .LOOP31
00001690                           972  
00001690                           973  .CHKPLAY2   
00001690  303C 0002                974              MOVE.W  #TANPLAY,D0
00001694  4EB8 105A                975              JSR     DMMFRSTO
00001698  B67C 0000                976              CMP.W   #0,D3       ; puede que falle en un futuro que las dos líneas de arriba se ejecuten ?
0000169C  6600 0006                977              BNE     .ENDCOLEX
000016A0  5268 001A                978              ADDQ.W  #1,26(A0)
000016A4                           979              
000016A4                           980  .ENDCOLEX   ; FINAL EN EL QUE LA BALA EXPLOTA POR TENER X COLISIONES CON BLOQUES         
000016A4                           981              ;MOVE.B  #SNDBULEX,D7
000016A4                           982              ;TRAP    #SNDPLTN
000016A4  4C9F 001F                983              MOVEM.W (A7)+,D0-D4
000016A8  4E75                     984              RTS 
000016AA                           985  
000016AA                           986  
000016AA                           987  .BULWALL    ;MOVE.B  #SNDWALL,D7 ; BULLET WALL SOUND
000016AA                           988              ;TRAP    #SNDPLTN           
000016AA                           989              
000016AA                           990  .CHKTAN     
000016AA                           991              ; CHECK TANK COLLISIONS
000016AA                           992              ; ENEMY TANK COLLISIONS
000016AA  48E7 FFC0                993              MOVEM.L A0-A1/D0-D7,-(A7)
000016AE  3410                     994              MOVE.W  (A0),D2                 ; PREPARE SHOT COORDINATES FOR
000016B0  3628 0002                995              MOVE.W  2(A0),D3                ; COLLISION CHECK
000016B4  3A3C 0004                996              MOVE.W  #BULRAD,D5
000016B8  3E3C 0004                997              MOVE.W  #BULRAD,D7
000016BC  2248                     998              MOVE.L  A0,A1
000016BE  303C 0003                999              MOVE.W  #TANENEM,D0
000016C2  4EB8 105A               1000              JSR     DMMFRSTO
000016C6  B1FC 00000000           1001  .LOOP       CMP.L   #0,A0
000016CC  6700 002E               1002              BEQ     .CHKPLAY
000016D0  3028 0008               1003              MOVE.W  8(A0),D0
000016D4  3228 000A               1004              MOVE.W  10(A0),D1
000016D8  0440 000C               1005              SUB.W   #TANWIDTH/2,D0
000016DC  0441 000C               1006              SUB.W   #TANHEIGH/2,D1
000016E0  383C 0018               1007              MOVE.W  #TANWIDTH,D4
000016E4  3C3C 0018               1008              MOVE.W  #TANHEIGH,D6
000016E8  4EB8 13AE               1009              JSR     UTLCHCOL
000016EC  4A00                    1010              TST.B   D0
000016EE  6600 0044               1011              BNE     .EXPLO
000016F2  303C 0003               1012              MOVE.W  #TANENEM,D0
000016F6  4EB8 107C               1013              JSR     DMMNEXTO
000016FA  60CA                    1014              BRA     .LOOP  
000016FC                          1015  .CHKPLAY    ; PLAYER TANK COLLISIONS
000016FC  303C 0002               1016              MOVE.W  #TANPLAY,D0
00001700  4EB8 105A               1017              JSR     DMMFRSTO
00001704  B1FC 00000000           1018              CMP.L   #0,A0
0000170A  6700 00B6               1019              BEQ     .END
0000170E  3028 0008               1020              MOVE.W  8(A0),D0
00001712  3228 000A               1021              MOVE.W  10(A0),D1
00001716  0440 000C               1022              SUB.W   #TANWIDTH/2,D0
0000171A  0441 000C               1023              SUB.W   #TANHEIGH/2,D1
0000171E  383C 0018               1024              MOVE.W  #TANWIDTH,D4
00001722  3C3C 0018               1025              MOVE.W  #TANHEIGH,D6
00001726  4EB8 13AE               1026              JSR     UTLCHCOL
0000172A  4A00                    1027              TST.B   D0
0000172C  6600 0006               1028              BNE     .EXPLO
00001730  6000 0090               1029              BRA     .END
00001734                          1030  
00001734                          1031              ; TANK COLLISION (SUBSTRACT LIFE, DISSAPPEAR THE BULLET)  ; agregar partículas?         
00001734                          1032  .EXPLO          
00001734  0468 0028 0018          1033              SUB.W   #BULDMG,24(A0)
0000173A                          1034              
0000173A  0C68 0000 0018          1035              CMP.W   #0,24(A0)
00001740  6200 0030               1036              BHI     .ALIVE
00001744                          1037              ; IF TANK LIFE IS 0
00001744                          1038              
00001744  0C68 0002 0016          1039              CMP.W   #TANPLAY,22(A0)
0000174A  6600 0012               1040              BNE.W   .ENSNDKIL
0000174E                          1041              ; IF HIT TANK IS NOT A BOT (PLAYER)
0000174E  33FC 0001 00002C8E      1042              MOVE.W  #KILLPLYR,(PLYRDEAD)
00001756                          1043              ;MOVE.B  #SNDWAA,D7
00001756                          1044              ;TRAP    #SNDPLTN
00001756  4EB8 10AC               1045              JSR     AGLKILL
0000175A  6000 001C               1046              BRA     .BULFINAL   
0000175E                          1047  .ENSNDKIL   ; IF TANK IS A BOT 
0000175E  5279 00002C80           1048              ADDQ.W  #1,(SCORE)  ; SUMAMOS 1 A LA PUNTUACIÓN 
00001764  1E3C 0004               1049              MOVE.B  #SNDKILL,D7
00001768  4E43                    1050              TRAP    #SNDPLTN
0000176A  4EB8 10AC               1051              JSR     AGLKILL
0000176E  6000 0008               1052              BRA     .BULFINAL
00001772                          1053  .ALIVE
00001772  1E3C 0003               1054              MOVE.B  #SNDHIT,D7  ; HIT SOUND IF TANK DOESN'T DIE
00001776  4E43                    1055              TRAP    #SNDPLTN
00001778                          1056  .BULFINAL    
00001778  2049                    1057              MOVE.L  A1,A0
0000177A  3628 0008               1058              MOVE.W  8(A0),D3    ; ALMACENAR EL FATHER ID
0000177E                          1059              ;MOVE.L  A0,A1   
0000177E                          1060       
0000177E                          1061              ; SUMARLE UNA BALA DISPONIBLE AL TANQUE
0000177E                          1062              ; COMPROBAR SI EL TANQUE PADRE DE LA BALA ES UN BOT, RECORRER TODOS Y COMPROBAR CON CUÁL COINCIDE EL TANID
0000177E  303C 0003               1063              MOVE.W  #TANENEM,D0
00001782  4242                    1064              CLR.W   D2          ; CONTADOR
00001784  4EB8 105A               1065              JSR     DMMFRSTO
00001788  B1FC 00000000           1066  .LOOP21     CMP.L   #0,A0
0000178E  6700 0018               1067              BEQ     .PLAYBULL   ; NO ENCONTRADO NINGÚN TANQUE ENEMIGO QUE SEA PADRE DE LA BALA, COMPROBAR JUGADOR
00001792  5242                    1068              ADDQ.W  #1,D2       ; AGREGAR 1 AL CONTADOR
00001794                          1069              
00001794  B642                    1070              CMP.W   D2,D3
00001796  6600 000A               1071              BNE     .LOOP22     
0000179A  5268 001A               1072              ADDQ.W  #1,26(A0)   ; SI ES EL PADRE LE SUMAMOS UNA BALA DISPONIBLE
0000179E  6000 001C               1073              BRA     .KILLBULL
000017A2                          1074  
000017A2  4EB8 107C               1075  .LOOP22     JSR     DMMNEXTO
000017A6  60E0                    1076              BRA     .LOOP21     ; SEGUIR CON EL BUCLE YA QUE NO ES EL PADRE            
000017A8                          1077  
000017A8                          1078  
000017A8                          1079  .PLAYBULL   ; EL TANQUE PADRE DE LA BALA ES EL JUGADOR (O ES UN ENEMIGO QUE HA MUERTO)
000017A8  303C 0002               1080              MOVE.W  #TANPLAY,D0
000017AC  4EB8 105A               1081              JSR     DMMFRSTO
000017B0  B67C 0000               1082              CMP.W   #0,D3       ; puede que falle en un futuro que las dos líneas de arriba se ejecuten ?
000017B4  6600 0006               1083              BNE     .KILLBULL
000017B8  5268 001A               1084              ADDQ.W  #1,26(A0)
000017BC                          1085              
000017BC                          1086  .KILLBULL
000017BC  2049                    1087              MOVE.L  A1,A0             
000017BE  4EB8 10AC               1088              JSR     AGLKILL 
000017C2                          1089              
000017C2  4CDF 03FF               1090  .END        MOVEM.L (A7)+,A0-A1/D0-D7
000017C6  6000 0002               1091              BRA     .DONE   
000017CA                          1092                
000017CA                          1093              ; STORE POSITION
000017CA  3080                    1094  .DONE       MOVE.W  D0,(A0)
000017CC  3141 0002               1095              MOVE.W  D1,2(A0)
000017D0                          1096              
000017D0  4C9F 001F               1097              MOVEM.W (A7)+,D0-D4
000017D4                          1098              
000017D4  4E75                    1099              RTS     
000017D6                          1100              
000017D6                          1101  ; ----------------------------------------------------------
000017D6                          1102  BULPLOT
000017D6                          1103  ; PLOT THE BULLET
000017D6                          1104  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
000017D6                          1105  ; OUTPUT    : NONE
000017D6                          1106  ; MODIFIES  : NONE
000017D6                          1107  ; ----------------------------------------------------------
000017D6  48E7 F800               1108              MOVEM.L D0-D4,-(A7)            
000017DA                          1109  
000017DA                          1110              ; SET PEN COLOR
000017DA  103C 0050               1111              MOVE.B  #80,D0
000017DE  223C 0031494D           1112              MOVE.L  #BULPCOL,D1
000017E4  4E4F                    1113              TRAP    #15
000017E6                          1114              
000017E6                          1115              ; SET FILL COLOR
000017E6  103C 0051               1116              MOVE.B  #81,D0
000017EA  223C 007CB4BA           1117              MOVE.L  #BULFCOL,D1
000017F0  4E4F                    1118              TRAP    #15
000017F2                          1119              
000017F2                          1120              ; DEFINE COORDINATES
000017F2  3210                    1121              MOVE.W  (A0),D1
000017F4  5941                    1122              SUB.W   #BULRAD,D1
000017F6  3428 0002               1123              MOVE.W  2(A0),D2
000017FA  5942                    1124              SUB.W   #BULRAD,D2
000017FC  3601                    1125              MOVE.W  D1,D3
000017FE  5043                    1126              ADD.W   #2*BULRAD,D3
00001800  3802                    1127              MOVE.W  D2,D4
00001802  5044                    1128              ADD.W   #2*BULRAD,D4
00001804                          1129              
00001804                          1130              ; DRAW CIRCLE
00001804  103C 0058               1131              MOVE.B  #88,D0
00001808  4E4F                    1132              TRAP    #15 
0000180A                          1133              
0000180A  4CDF 001F               1134              MOVEM.L (A7)+,D0-D4 
0000180E                          1135  
0000180E  4E75                    1136              RTS
00001810                          1137              
00001810                          1138  
00001810                          1139  
00001810                          1140  
00001810                          1141  
00001810                          1142  
00001810                          1143  
00001810                          1144  
00001810                          1145  
00001810                          1146  
00001810                          1147  
00001810                          1148  
00001810                          1149  
00001810                          1150  
00001810                          1151  -------------------- end include --------------------
00001810                          1152      INCLUDE "TANK.X68"
00001810                          1153  
00001810                          1154  ; ----------------------------------------------------------
00001810                          1155  TANINIT
00001810                          1156  ; INITIALITZE TANK
00001810                          1157  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
00001810                          1158  ; OUTPUT    : NONE
00001810                          1159  ; MODIFIES  : NONE
00001810                          1160  ; ----------------------------------------------------------
00001810                          1161              
00001810                          1162              ;MOVEM.L D0/A1,-(A7)
00001810                          1163              ;JSR     UTLRAND
00001810                          1164              ;AND.L   #$0000000C,D0      ; MÁSCARA PARA OBTENER MÚLTIPLOS DE 4 (ALEATORIOS)
00001810                          1165              ;LEA     .POSVEC,A1
00001810                          1166              ;MOVE.L  (A1,D0),(A0)       ; INITIAL TANK POSITION X AND Y    
00001810                          1167              ;MOVEM.L (A7)+,D0/A1
00001810                          1168              ;RTS      
00001810                          1169  
00001810  3081                    1170              MOVE.W  D1,(A0)
00001812  3142 0002               1171              MOVE.W  D2,2(A0)
00001816                          1172  
00001816  B07C 0002               1173              CMP.W   #TANPLAY,D0
0000181A  6600 003A               1174              BNE.W   .BOT
0000181E                          1175              
0000181E                          1176              ; IF TANK IS NOT A BOT (PLAYER)
0000181E  33FC 0000 00002C8E      1177              MOVE.W  #PLYRALIV,(PLYRDEAD)           ; EL JUGADOR NO ESTÁ MUERTO
00001826  317C 0002 0004          1178              MOVE.W  #PLRSPEED,4(A0)         
0000182C  217C 00344D31 0006      1179              MOVE.L  #$00344D31,6(A0)        ; COLOR DE CONTORNO DEL TANQUE   
00001834  217C 00608C59 000A      1180              MOVE.L  #$00608C59,10(A0)       ; COLOR DE RELLENO DEL TANQUE
0000183C  317C 0002 000E          1181              MOVE.W  #TANPLAY,14(A0)         ; EL TANQUE ES EL JUGADOR 
00001842  317C 0190 0010          1182              MOVE.W  #PLRINILF,16(A0)        ; VIDA INICIAL DEL TANQUE JUGADOR
00001848  317C 0003 0012          1183              MOVE.W  #PLMAXBUL,18(A0)        ; MÁXIMAS BALAS DISPONIBLES PARA DISPARAR
0000184E  317C 0000 0014          1184              MOVE.W  #0,20(A0)               ; TANID DEL JUGADOR SERÁ 0
00001854  4E75                    1185              RTS 
00001856                          1186              
00001856                          1187              ; ELSE (TANK IS A BOT)
00001856                          1188  .BOT
00001856  317C 0001 0004          1189              MOVE.W  #ENESPEED,4(A0)
0000185C  217C 000B2187 0006      1190              MOVE.L  #$000B2187,6(A0)  
00001864  217C 00081658 000A      1191              MOVE.L  #$00081658,10(A0)
0000186C  317C 0003 000E          1192              MOVE.W  #TANENEM,14(A0)         ; EL TANQUE ES UN BOT
00001872  317C 0078 0010          1193              MOVE.W  #ENEINILF,16(A0)        ; VIDA INICIAL DEL TANQUE ENEMIGO
00001878  317C 0001 0012          1194              MOVE.W  #ENMAXBUL,18(A0)        ; MÁXIMAS BALAS DISPONIBLES PARA DISPARAR
0000187E  3143 0014               1195              MOVE.W  D3,20(A0)               ; IDENTIFICADOR DEL TANQUE ENEMIGO
00001882  317C 0000 0016          1196              MOVE.W  #0,22(A0)               ; CUANDO SEA 0 PODRÁ VOLVER A DISPARAR
00001888  4E75                    1197              RTS
0000188A                          1198              
0000188A                          1199              ; 4 posiciones aleatorias ( modificar para que no dependa de este vector )
0000188A                          1200  ;.POSVEC     DC.W    SCRWIDTH/4,SCRHEIGH-100   ; 0
0000188A                          1201  ;            DC.W    SCRWIDTH-50,SCRHEIGH/12   ; 4
0000188A                          1202  ;            DC.W    SCRWIDTH-320,SCRHEIGH-30  ; 8
0000188A                          1203  ;            DC.W    SCRWIDTH/5,SCRHEIGH/5     ; 12 
0000188A                          1204              
0000188A                          1205  
0000188A                          1206  ; ----------------------------------------------------------            
0000188A                          1207  TANUPD
0000188A                          1208  ; UPDATE THE TANK
0000188A                          1209  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
0000188A                          1210  ; OUTPUT    : NONE
0000188A                          1211  ; MODIFIES  : NONE
0000188A                          1212  ; ----------------------------------------------------------
0000188A                          1213  
0000188A  48A7 FF40               1214              MOVEM.W D0-D7/A1,-(A7)
0000188E                          1215              
0000188E                          1216              ; UPDATE COORDINATES
0000188E  3010                    1217              MOVE.W  (A0),D0
00001890  3228 0002               1218              MOVE.W  2(A0),D1
00001894                          1219              
00001894                          1220              ; IF TANK IS NOT A BOT (PLAYER)
00001894  0C68 0002 000E          1221              CMP.W   #TANPLAY,14(A0)
0000189A  6600 008C               1222              BNE.W   .BOT2
0000189E                          1223              
0000189E  0839 0000 00002C92      1224              BTST.B  #0,(KBDVAL)
000018A6  6700 0006               1225              BEQ     .CHKLEFT
000018AA  9068 0004               1226              SUB.W   4(A0),D0  ;RESTAMOS LA VELOCIDAD AL EJE X
000018AE  0839 0002 00002C92      1227  .CHKLEFT    BTST.B  #2,(KBDVAL)
000018B6  6700 0006               1228              BEQ     .CONT1
000018BA  D068 0004               1229              ADD.W   4(A0),D0  ;SUMAMOS LA VELOCIDAD AL EJE X
000018BE                          1230  .CONT1            
000018BE  0839 0001 00002C92      1231              BTST.B  #1,(KBDVAL)
000018C6  6700 0006               1232              BEQ     .CHKDWN 
000018CA  9268 0004               1233              SUB.W   4(A0),D1  ;RESTAMOS LA VELOCIDAD AL EJE Y
000018CE  0839 0003 00002C92      1234  .CHKDWN     BTST.B  #3,(KBDVAL)
000018D6  6700 0006               1235              BEQ     .DISP
000018DA  D268 0004               1236              ADD.W   4(A0),D1  ;SUMAMOS LA VELOCIDAD AL EJE Y
000018DE                          1237  .DISP          
000018DE                          1238              ; COMPROBAR SI ESTÁ DISPARANDO  
000018DE                          1239          
000018DE  0839 0004 00002C93      1240              BTST.B  #4,(KBDEDGE)            ; ESPACIO PULSADO
000018E6  6700 00E8               1241              BEQ     .CONT2
000018EA                          1242              
000018EA  0C68 0000 0012          1243              CMP.W   #0,18(A0)
000018F0  6700 00DE               1244              BEQ     .CONT2                  ; NO QUEDAN BALAS DISPONIBLES 
000018F4                          1245  
000018F4  1E3C 0007               1246              MOVE.B  #SNDDISP,D7             ; SONIDO DISPARO
000018F8  4E43                    1247              TRAP    #SNDPLTN  
000018FA                          1248  
000018FA  3800                    1249              MOVE.W  D0,D4
000018FC  3A01                    1250              MOVE.W  D1,D5
000018FE                          1251                     
000018FE  43F8 1500               1252              LEA     BULINIT,A1
00001902  45F8 1526               1253              LEA     BULUPD,A2
00001906  47F8 17D6               1254              LEA     BULPLOT,A3            
0000190A  303C 0001               1255              MOVE.W  #BULTYPE,D0
0000190E  3210                    1256              MOVE.W  (A0),D1
00001910  3428 0002               1257              MOVE.W  2(A0),D2
00001914  3628 0014               1258              MOVE.W  20(A0),D3
00001918  4EB8 1302               1259              JSR     AGLADD
0000191C                          1260                              
0000191C  3004                    1261              MOVE.W  D4,D0
0000191E  3205                    1262              MOVE.W  D5,D1
00001920  5368 0012               1263              SUBQ.W  #1,18(A0)               ; UNA BALA DISPONIBLE MENOS
00001924  6000 00AA               1264              BRA .CONT2
00001928                          1265              
00001928                          1266  .BOT2       ; ELSE (TANK IS A BOT)
00001928                          1267              ; AI ALGORITHM (greedy por ahora para testear)
00001928                          1268              ;MOVEM.L D0-D5,-(A7)             ; MOVEM.L D0-D3/A0-A1,-(A7)
00001928                          1269              
00001928  3210                    1270              MOVE.W  (A0),D1
0000192A  3428 0002               1271              MOVE.W  2(A0),D2
0000192E  3628 0004               1272              MOVE.W  4(A0),D3                ; guardo la velocidad del tanque enemigo aunque no haría falta (por si la velocidad en un futuro la cambiamos a variable según el tanque)
00001932                          1273              
00001932                          1274              ; -> HACER QUE EL TANQUE A VECES HAGA UN MOVIMIENTO ALEATORIO Y A VECES SE ACERQUE AL JUGADOR.
00001932                          1275              ; -> HACER QUE NO SE PUEDA ACERCAR AL JUGADOR A MÁS DE ? POSICIÓN
00001932                          1276              ; -> HACER QUE DISPARE CON UNA FRECUENCIA ASIGNADA (predecible?)
00001932                          1277              
00001932                          1278              ;MOVEM.L D0/A1,-(A7)
00001932                          1279              ;JSR     UTLRAND
00001932                          1280              ;AND.L   #$0000000C,D0      ; MÁSCARA PARA OBTENER MÚLTIPLOS DE 4 (ALEATORIOS)
00001932                          1281              ;LEA     .POSVEC,A1
00001932                          1282              ;MOVE.L  (A1,D0),(A0)       ; RANDOM MOVEMENT    
00001932                          1283              ;MOVEM.L (A7)+,D0/A1
00001932                          1284              ;RTS
00001932                          1285              
00001932  2248                    1286              MOVE.L  A0,A1
00001934  303C 0002               1287              MOVE.W  #TANPLAY,D0
00001938  4EB8 105A               1288              JSR     DMMFRSTO
0000193C                          1289              
0000193C  B268 0008               1290              CMP.W   8(A0),D1
00001940  6200 000A               1291              BHI     .NEGVELX                ; XENEM > XPLAY
00001944  6500 000C               1292              BLO     .POSVELX                ; XENEM < XPLAY
00001948  6000 000A               1293              BRA     .VELY                   ; XENEM = XPLAY
0000194C                          1294              
0000194C  9243                    1295  .NEGVELX    SUB.W   D3,D1
0000194E  6000 0004               1296              BRA     .VELY
00001952  D243                    1297  .POSVELX    ADD.W   D3,D1
00001954                          1298  
00001954  B468 000A               1299  .VELY       CMP.W   10(A0),D2
00001958  6200 000A               1300              BHI     .NEGVELY                ; YENEM > YPLAY
0000195C  6500 000C               1301              BLO     .POSVELY                ; YENEM < YPLAY
00001960  6000 000A               1302              BRA     .ENDALG                 ; YENEM = YPLAY
00001964                          1303  
00001964  9443                    1304  .NEGVELY    SUB.W   D3,D2
00001966  6000 0004               1305              BRA     .ENDALG
0000196A  D443                    1306  .POSVELY    ADD.W   D3,D2           
0000196C                          1307         
0000196C  2049                    1308  .ENDALG     MOVE.L  A1,A0
0000196E                          1309  
0000196E  3081                    1310              MOVE.W  D1,(A0)
00001970  3142 0002               1311              MOVE.W  D2,2(A0)
00001974                          1312              
00001974  3001                    1313              MOVE.W  D1,D0
00001976  3202                    1314              MOVE.W  D2,D1
00001978                          1315              
00001978                          1316              ; DISPARO
00001978  3800                    1317              MOVE.W  D0,D4
0000197A  3A01                    1318              MOVE.W  D1,D5
0000197C                          1319              
0000197C  0C68 0000 0016          1320              CMP.W   #0,22(A0)               
00001982  6200 003E               1321              BHI     .SUBRTF                 ; ENEMIGO AÚN NO TIENE DISPONIBLE DISPARAR     
00001986                          1322  
00001986  0C68 0000 0012          1323              CMP.W   #0,18(A0)
0000198C  6700 0034               1324              BEQ     .SUBRTF                 ; NO QUEDAN BALAS DISPONIBLES           
00001990                          1325  
00001990  317C 0064 0016          1326              MOVE.W  #ENEMYRTF,22(A0)        ; REINICIAR CONTADOR
00001996                          1327  
00001996  1E3C 0007               1328              MOVE.B  #SNDDISP,D7             ; SONIDO DISPARO
0000199A  4E43                    1329              TRAP    #SNDPLTN  
0000199C                          1330  
0000199C  43F8 1500               1331              LEA     BULINIT,A1
000019A0  45F8 1526               1332              LEA     BULUPD,A2
000019A4  47F8 17D6               1333              LEA     BULPLOT,A3            
000019A8  303C 0001               1334              MOVE.W  #BULTYPE,D0
000019AC  3210                    1335              MOVE.W  (A0),D1                 ;MOVE.W  D3,D1
000019AE  3428 0002               1336              MOVE.W  2(A0),D2                ;MOVE.W  D4,D2
000019B2  3628 0014               1337              MOVE.W  20(A0),D3
000019B6  4EB8 1302               1338              JSR     AGLADD
000019BA                          1339  
000019BA  5368 0012               1340              SUBQ.W  #1,18(A0)               ; UNA BALA DISPONIBLE MENOS
000019BE                          1341              
000019BE  3004                    1342              MOVE.W  D4,D0
000019C0  3205                    1343              MOVE.W  D5,D1
000019C2                          1344              
000019C2                          1345  
000019C2                          1346  .SUBRTF
000019C2  0C68 0000 0016          1347              CMP.W   #0,22(A0)               ; PARA QUE NO PONGA NÚMEROS NEGATIVOS (puede que estas líneas no hagan falta)
000019C8  6700 0006               1348              BEQ     .CONT2
000019CC  5368 0016               1349              SUBQ.W  #1,22(A0)               ; RESTARLE 1 AL RTF DEL TANQUE
000019D0                          1350  
000019D0                          1351              ; COMPROBACIÓN DE LA COLISIÓN DE LOS TANQUES CON OTROS TANQUES
000019D0                          1352  
000019D0                          1353  .CONT2 
000019D0                          1354              ;INICIALIZAMOS
000019D0  43F9 00001BFE           1355              LEA.L   MAPDATA,A1
000019D6                          1356              ;SUBQ.L  #2,A1
000019D6  3800                    1357              MOVE.W  D0,D4
000019D8  3A01                    1358              MOVE.W  D1,D5
000019DA  343C 0000               1359              MOVE.W  #0,D2
000019DE  363C 0000               1360              MOVE.W  #0,D3
000019E2                          1361              
000019E2                          1362              ;SACAMOS LA POSICIÓN RELATIVA DE X
000019E2  6000 000C               1363              BRA .CHKX
000019E6                          1364  .NOORGX
000019E6  0444 0020               1365              SUB.W   #PIESIZX,D4
000019EA  5489                    1366              ADDQ.L  #2,A1
000019EC  0642 0020               1367              ADD.W   #PIESIZX,D2
000019F0                          1368  .CHKX            
000019F0  B87C 0020               1369              CMP.W   #PIESIZX,D4
000019F4  6EF0                    1370              BGT     .NOORGX             
000019F6                          1371              
000019F6                          1372              ;SACAMOS LA POSICIÓN RELATIVA DE Y
000019F6  6000 0010               1373              BRA .CHKY
000019FA                          1374  .NOORGY
000019FA  0445 0020               1375              SUB.W   #PIESIZY,D5
000019FE  D3FC 00000028           1376              ADD.L   #40,A1
00001A04  0643 0020               1377              ADD.W   #PIESIZY,D3
00001A08                          1378  .CHKY            
00001A08  BA7C 0020               1379              CMP.W   #PIESIZX,D5
00001A0C  6EEC                    1380              BGT     .NOORGY
00001A0E                          1381              
00001A0E                          1382              
00001A0E                          1383              ;CMP.L   #$00,(A1)
00001A0E                          1384              ;BNE     .NOCOL
00001A0E                          1385              
00001A0E                          1386              
00001A0E                          1387              ; CHECK HORIZONTAL COLLISIONS
00001A0E  B87C 0014               1388              CMP.W   #PIESIZX-TANWIDTH/2,D4
00001A12  6C00 001E               1389              BGE     .COLRGT
00001A16                          1390  .RECX
00001A16  B87C 000C               1391              CMP.W   #TANWIDTH/2,D4            
00001A1A  6D00 002A               1392              BLT     .COLLFT                 
00001A1E                          1393              
00001A1E                          1394              ; CHECK VERTICAL COLLISIONS
00001A1E  BA7C 0014               1395  .CHKVERT    CMP.W   #PIESIZY-TANHEIGH/2,D5
00001A22  6C00 0036               1396              BGE     .COLBOT
00001A26                          1397  .RECY            
00001A26  BA7C 000C               1398              CMP.W   #TANHEIGH/2,D5
00001A2A  6D00 004A               1399              BLT     .COLTOP                
00001A2E  6000 0060               1400              BRA     .DONE   
00001A32                          1401              
00001A32                          1402              ; RIGHT SIDE COLLISION    
00001A32                          1403  .COLRGT     
00001A32  5489                    1404              ADDQ.L  #2,A1
00001A34  0C51 0001               1405              CMP.W   #$01,(A1)
00001A38  6600 0008               1406              BNE     .FARSC
00001A3C  303C 0014               1407              MOVE.W  #PIESIZX-TANWIDTH/2,D0
00001A40  D042                    1408              ADD.W   D2,D0
00001A42                          1409  .FARSC
00001A42  5589                    1410              SUBQ.L  #2,A1
00001A44  60D0                    1411              BRA     .RECX
00001A46                          1412  
00001A46                          1413              ; LEFT SIDE COLLISION
00001A46                          1414  .COLLFT     
00001A46  5589                    1415              SUBQ.L  #2,A1
00001A48  0C51 0001               1416              CMP.W   #$01,(A1)
00001A4C  6600 0008               1417              BNE     .FALSC
00001A50  303C 000C               1418              MOVE.W  #TANWIDTH/2,D0
00001A54  D042                    1419              ADD.W   D2,D0                   
00001A56                          1420  .FALSC
00001A56  5489                    1421              ADDQ.L  #2,A1
00001A58  60C4                    1422              BRA     .CHKVERT  
00001A5A                          1423  
00001A5A                          1424              ; BOTTOM COLLISION
00001A5A                          1425  .COLBOT     
00001A5A  D3FC 00000028           1426              ADD.L   #40,A1
00001A60  0C51 0001               1427              CMP.W   #$01,(A1)
00001A64  6600 0008               1428              BNE     .FABSC
00001A68  323C 0014               1429              MOVE.W  #PIESIZY-TANHEIGH/2,D1
00001A6C  D243                    1430              ADD.W   D3,D1
00001A6E                          1431  .FABSC
00001A6E  93FC 00000028           1432              SUB.L  #40,A1            
00001A74  60B0                    1433              BRA     .RECY
00001A76                          1434  
00001A76                          1435              ; TOP COLLISION
00001A76                          1436  .COLTOP     
00001A76  93FC 00000028           1437              SUB.L   #40,A1
00001A7C  0C51 0001               1438              CMP.W   #$01,(A1)
00001A80  6600 0008               1439              BNE     .FATSC
00001A84  323C 000C               1440              MOVE.W  #TANHEIGH/2,D1
00001A88  D243                    1441              ADD.W   D3,D1         
00001A8A                          1442  .FATSC
00001A8A  93FC 00000028           1443              SUB.L  #40,A1          
00001A90                          1444   
00001A90                          1445  .FINCOLS
00001A90                          1446              
00001A90                          1447              ; STORE POSITION
00001A90  3080                    1448  .DONE       MOVE.W  D0,(A0)
00001A92  3141 0002               1449              MOVE.W  D1,2(A0)
00001A96                          1450              
00001A96  4C9F 02FF               1451              MOVEM.W (A7)+,D0-D7/A1
00001A9A  4E75                    1452              RTS
00001A9C                          1453                        
00001A9C                          1454  TANPLOT
00001A9C                          1455  ; PLOT THE TANK
00001A9C                          1456  ; INPUT     : A0 POINTER TO THE INSTANCE VARIABLES
00001A9C                          1457  ; OUTPUT    : NONE
00001A9C                          1458  ; MODIFIES  : NONE
00001A9C                          1459  ; ----------------------------------------------------------
00001A9C                          1460              
00001A9C  48E7 F800               1461              MOVEM.L D0-D4,-(A7)
00001AA0                          1462  
00001AA0                          1463              ; SET CONTOUR COLOR
00001AA0  103C 0050               1464              MOVE.B  #80,D0
00001AA4  2228 0006               1465              MOVE.L  6(A0),D1
00001AA8  4E4F                    1466              TRAP    #15
00001AAA                          1467              
00001AAA                          1468              ; SET FILL COLOR
00001AAA  103C 0051               1469              MOVE.B  #81,D0
00001AAE  2228 000A               1470              MOVE.L  10(A0),D1
00001AB2  4E4F                    1471              TRAP    #15
00001AB4                          1472              
00001AB4                          1473              ; DEFINE COORDINATES
00001AB4  3210                    1474              MOVE.W  (A0),D1
00001AB6  0441 000C               1475              SUB.W   #TANWIDTH/2,D1
00001ABA  3601                    1476              MOVE.W  D1,D3
00001ABC  0643 0018               1477              ADD.W   #TANWIDTH,D3
00001AC0                          1478              
00001AC0  3428 0002               1479              MOVE.W  2(A0),D2
00001AC4  0442 000C               1480              SUB.W   #TANHEIGH/2,D2
00001AC8  3802                    1481              MOVE.W  D2,D4
00001ACA  0644 0018               1482              ADD.W   #TANHEIGH,D4
00001ACE                          1483              
00001ACE                          1484              ; DRAW RECTANGLE (TANK)
00001ACE  103C 0057               1485              MOVE.B  #87,D0
00001AD2  4E4F                    1486              TRAP    #15
00001AD4                          1487          
00001AD4                          1488              ; PLOT LIFE
00001AD4                          1489              ; IF TANK IS NOT A BOT (PLAYER)
00001AD4  0C68 0002 000E          1490              CMP.W   #TANPLAY,14(A0)
00001ADA  6600 003C               1491              BNE.W   .END
00001ADE                          1492  
00001ADE                          1493m             UTLSPEN #$00FFFFFF 
00001ADE                          1494m ; WRAPPER FOR SET PEN TRAP 15 TASK.
00001ADE                          1495m ; INPUT    - #$00FFFFFF COLOR IN FORMAT $00BBGGRR
00001ADE                          1496m ; OUTPUT   - NONE
00001ADE                          1497m ; MODIFIES - D0,D1
00001ADE                          1498m ; -----------------------------------------------------------------------------
00001AEA                          1499m             UTLSFIL #PLRLIFEC
00001AEA                          1500m ; WRAPPER FOR SET FIL TRAP 15 TASK.
00001AEA                          1501m ; INPUT    - #PLRLIFEC COLOR IN FORMAT $00BBGGRR
00001AEA                          1502m ; OUTPUT   - NONE
00001AEA                          1503m ; MODIFIES - D0,D1
00001AEA                          1504m ; -----------------------------------------------------------------------------
00001AF6  323C 0078               1505              MOVE.W  #(SCRWIDTH-PLRINILF)/2,D1
00001AFA  343C 01C6               1506              MOVE.W  #PLRLIFEY,D2
00001AFE  3628 0010               1507              MOVE.W  16(A0),D3
00001B02  D641                    1508              ADD.W   D1,D3
00001B04  383C 01DA               1509              MOVE.W  #PLRLIFEY+PLRLIFEH,D4
00001B08  103C 0057               1510              MOVE.B  #87,D0
00001B0C  4E4F                    1511              TRAP    #15
00001B0E  363C 0208               1512              MOVE.W  #(SCRWIDTH+PLRINILF)/2,D3
00001B12  103C 005A               1513              MOVE.B  #90,D0
00001B16  4E4F                    1514              TRAP    #15
00001B18                          1515  .END            
00001B18  4CDF 001F               1516              MOVEM.L (A7)+,D0-D4
00001B1C                          1517              
00001B1C  4E75                    1518              RTS    
00001B1E                          1519  
00001B1E                          1520  
00001B1E                          1521  
00001B1E                          1522  
00001B1E                          1523  
00001B1E                          1524  
00001B1E                          1525  
00001B1E                          1526  
00001B1E                          1527  
00001B1E                          1528  
00001B1E                          1529  
00001B1E                          1530  
00001B1E                          1531  
00001B1E                          1532  
00001B1E                          1533  
00001B1E                          1534  
00001B1E                          1535  
00001B1E                          1536  
00001B1E                          1537  
00001B1E                          1538  
00001B1E                          1539  
00001B1E                          1540  
00001B1E                          1541  
00001B1E                          1542  
00001B1E                          1543  
00001B1E                          1544  
00001B1E                          1545  
00001B1E                          1546  
00001B1E                          1547  
00001B1E                          1548  
00001B1E                          1549  
00001B1E                          1550  -------------------- end include --------------------
00001B1E                          1551      INCLUDE "SCORE.X68"
00001B1E                          1552  
00001B1E                          1553  ; ----------------------------------------------------------
00001B1E                          1554  SCOINIT
00001B1E                          1555  ; INITIALITZE SCOREBOARD
00001B1E                          1556  ; INPUT     : NONE
00001B1E                          1557  ; OUTPUT    : NONE
00001B1E                          1558  ; MODIFIES  : NONE
00001B1E                          1559  ; ----------------------------------------------------------
00001B1E  4279 00002C80           1560              CLR.W   (SCORE)
00001B24  4E75                    1561              RTS
00001B26                          1562  
00001B26                          1563  ; ----------------------------------------------------------
00001B26                          1564  SCOPLOT
00001B26                          1565  ; PLOT THE SCOREBOARD
00001B26                          1566  ; INPUT     : NONE
00001B26                          1567  ; OUTPUT    : NONE
00001B26                          1568  ; MODIFIES  : NONE
00001B26                          1569  ; ----------------------------------------------------------
00001B26                          1570  
00001B26  48E7 C040               1571              MOVEM.L D0-D1/A1,-(A7)
00001B2A                          1572  
00001B2A                          1573              ; SET BACKGROUND COLOR
00001B2A  103C 0051               1574              MOVE.B  #81,D0
00001B2E  7200                    1575              MOVE.L  #SCOFCOL,D1
00001B30  4E4F                    1576              TRAP    #15
00001B32                          1577              
00001B32                          1578              ; SET LINE POSITION
00001B32  103C 000B               1579              MOVE.B  #11,D0
00001B36  323C 0101               1580              MOVE.W  #SCOLINE,D1
00001B3A  4E4F                    1581              TRAP    #15
00001B3C                          1582  
00001B3C                          1583              ; PRINT LINE
00001B3C  43F9 00001B56           1584              LEA     .TXT,A1
00001B42  4281                    1585              CLR.L   D1
00001B44  3239 00002C80           1586              MOVE.W  (SCORE),D1
00001B4A  103C 0011               1587              MOVE.B  #17,D0
00001B4E  4E4F                    1588              TRAP    #15    
00001B50                          1589  
00001B50  4CDF 0203               1590              MOVEM.L (A7)+,D0-D1/A1          
00001B54                          1591  
00001B54  4E75                    1592              RTS
00001B56= 50 55 4E 54 55 41 ...   1593  .TXT        DC.B    'PUNTUACIÓN: ',0   
00001B64                          1594              DS.W    0                   ; PARA QUE LAS INSTRUCCIONES ESTÉN ALINEADAS
00001B64                          1595  
00001B64                          1596  
00001B64                          1597  -------------------- end include --------------------
00001B64                          1598      INCLUDE "MAP.X68"           ; antes todo lo de mapa y casilla estaba después del game (creo que así es más correcto)
00001B64                          1599  ; =============================================================================
00001B64                          1600  ; MAPA MAPEACIÓN
00001B64                          1601  ; =============================================================================
00001B64                          1602  
00001B64                          1603  ; -----------------------------------------------------------------------------
00001B64                          1604  MAPINIT
00001B64                          1605  ; INITALIZES THE MAP
00001B64                          1606  ; INPUT    - NONE
00001B64                          1607  ; OUTPUT   - NONE
00001B64                          1608  ; MODIFIES - NONE
00001B64                          1609  ; -----------------------------------------------------------------------------
00001B64                          1610  
00001B64  4E75                    1611              RTS
00001B66                          1612  
00001B66                          1613  ; -----------------------------------------------------------------------------
00001B66                          1614  MAPUPD
00001B66                          1615  ; UPDATES THE MAP IF PLAYER CHANGES SCREEN
00001B66                          1616  ; INPUT    - NONE
00001B66                          1617  ; OUTPUT   - NONE
00001B66                          1618  ; MODIFIES - NONE
00001B66                          1619  ; -----------------------------------------------------------------------------
00001B66                          1620              
00001B66  4E75                    1621              RTS
00001B68                          1622  
00001B68                          1623  ; -----------------------------------------------------------------------------
00001B68                          1624  MAPPLOT
00001B68                          1625  ; PLOTS THE MAP
00001B68                          1626  ; INPUT    - NONE
00001B68                          1627  ; OUTPUT   - NONE
00001B68                          1628  ; MODIFIES - NONE
00001B68                          1629  ; -----------------------------------------------------------------------------
00001B68                          1630  
00001B68  48E7 8080               1631              MOVEM.L D0/A0,-(A7)
00001B6C                          1632              
00001B6C  41F9 00001BFE           1633              LEA.L   MAPDATA, A0
00001B72                          1634                          
00001B72                          1635              ;INICIO BUCLE MATRICIAL DE PINTURA
00001B72  3C3C 000E               1636              MOVE.W #MAPPIEY-1, D6
00001B76  343C FFE0               1637              MOVE.W  #-PIESIZY, D2
00001B7A  4283                    1638              CLR.L   D3
00001B7C  4284                    1639              CLR.L   D4
00001B7E                          1640  .LINEY      ;PARA TODAS LAS FILAS
00001B7E  3A3C 0013               1641              MOVE.W #MAPPIEX-1, D5
00001B82  3E3C FFE0               1642              MOVE.W  #-PIESIZX, D7
00001B86  0642 0020               1643              ADD.W  #PIESIZY,D2
00001B8A                          1644  .LINEX      ;PINTAMOS SU CUADRADO
00001B8A                          1645  
00001B8A                          1646              ;MIRAMOS SI ES PARED O SUELO
00001B8A  3018                    1647              MOVE.W  (A0)+,D0
00001B8C  B07C 0001               1648              CMP.W   #$01, D0
00001B90                          1649              
00001B90  6700 0032               1650              BEQ    .PARED
00001B94                          1651              ; SET CONTOUR COLOR
00001B94  103C 0050               1652              MOVE.B  #80,D0
00001B98  223C 0042C0FF           1653              MOVE.L  #$0042C0FF,D1
00001B9E  4E4F                    1654              TRAP    #15
00001BA0                          1655              
00001BA0                          1656              ; SET FILL COLOR
00001BA0  103C 0051               1657              MOVE.B  #81,D0
00001BA4  223C 0042C0FF           1658              MOVE.L  #$0042C0FF,D1
00001BAA  4E4F                    1659              TRAP    #15
00001BAC                          1660              
00001BAC                          1661              ; DEFINE COORDINATES (D2 ESTÁ ARRIBA)
00001BAC  0647 0020               1662              ADD.W  #PIESIZX, D7
00001BB0  3207                    1663              MOVE.W  D7, D1
00001BB2  0643 0020               1664              ADD.W   #PIESIZX, D3
00001BB6  0644 0020               1665              ADD.W   #PIESIZY, D4 
00001BBA                          1666              
00001BBA                          1667              ; DRAW RECTANGLE (CASILLA)
00001BBA  103C 0057               1668              MOVE.B  #87,D0
00001BBE  4E4F                    1669              TRAP    #15
00001BC0                          1670              
00001BC0  6000 002E               1671              BRA     .SOLEADO
00001BC4                          1672  
00001BC4                          1673  .PARED                   
00001BC4                          1674              ; SET CONTOUR COLOR
00001BC4  103C 0050               1675              MOVE.B  #80,D0
00001BC8  223C 000076AC           1676              MOVE.L  #$000076AC,D1
00001BCE  4E4F                    1677              TRAP    #15
00001BD0                          1678              
00001BD0                          1679              ; SET FILL COLOR
00001BD0  103C 0051               1680              MOVE.B  #81,D0
00001BD4  223C 000076AC           1681              MOVE.L  #$000076AC,D1
00001BDA  4E4F                    1682              TRAP    #15
00001BDC                          1683              
00001BDC                          1684              ; DEFINE COORDINATES (D2 ESTÁ ARRIBA)
00001BDC  0647 0020               1685              ADD.W  #PIESIZX, D7
00001BE0  3207                    1686              MOVE.W  D7, D1
00001BE2  0643 0020               1687              ADD.W   #PIESIZX, D3
00001BE6  0644 0020               1688              ADD.W   #PIESIZY, D4 
00001BEA                          1689              
00001BEA                          1690              ; DRAW RECTANGLE (CASILLA)
00001BEA  103C 0057               1691              MOVE.B  #87,D0
00001BEE  4E4F                    1692              TRAP    #15
00001BF0                          1693              
00001BF0                          1694              ;JSR     CASPLOT
00001BF0                          1695  
00001BF0                          1696  .SOLEADO
00001BF0                          1697  
00001BF0                          1698                          
00001BF0  51CD FF98               1699              DBRA D5, .LINEX
00001BF4  51CE FF88               1700              DBRA D6, .LINEY
00001BF8                          1701              
00001BF8  4CDF 0101               1702              MOVEM.L (A7)+,D0/A0
00001BFC                          1703  
00001BFC  4E75                    1704              RTS
00001BFE                          1705  
00001BFE                          1706  
00001BFE                          1707  
00001BFE                          1708  
00001BFE                          1709  
00001BFE                          1710  
00001BFE                          1711  
00001BFE                          1712  
00001BFE                          1713  
00001BFE                          1714  
00001BFE                          1715  
00001BFE                          1716  
00001BFE                          1717  
00001BFE                          1718  
00001BFE                          1719  
00001BFE                          1720  
00001BFE                          1721  -------------------- end include --------------------
00001BFE                          1722      INCLUDE "DATA/MAPDATA.X68"
00001BFE                          1723  
00001BFE= 0001 0001 0001 0...     1724  MAPDATA     DC.W    $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
00001C26= 0001 0000 0000 0...     1725              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001C4E= 0001 0000 0000 0...     1726              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001C76= 0001 0000 0000 0...     1727              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$00,$00,$00,$00,$01
00001C9E= 0001 0000 0000 0...     1728              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00,$01
00001CC6= 0001 0000 0000 0...     1729              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001CEE= 0001 0000 0000 0...     1730              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001D16= 0001 0000 0000 0...     1731              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001D3E= 0001 0000 0000 0...     1732              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001D66= 0001 0000 0000 0...     1733              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001D8E= 0001 0000 0000 0...     1734              DC.W    $01,$00,$00,$00,$00,$00,$01,$00,$00,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00,$01
00001DB6= 0001 0000 0000 0...     1735              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$00,$00,$00,$00,$01
00001DDE= 0001 0000 0000 0...     1736              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001E06= 0001 0000 0000 0...     1737              DC.W    $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01
00001E2E= 0001 0001 0001 0...     1738              DC.W    $01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
00001E56                          1739  
00001E56                          1740  
00001E56                          1741  -------------------- end include --------------------
00001E56                          1742      INCLUDE "DATA/CASDATA.X68"
00001E56                          1743  
00001E56= 0001 0000 0004 0...     1744  CASDATA     DC.W    $01,$00,$04,$00,$04,$00,$01,$06,$01,$00,$04,$00,$04,$00,$01,$06,$01,$01,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$01,$01,$06
00001E96= 0001 0001 0004 0...     1745              DC.W    $01,$01,$04,$01,$04,$01,$01,$06,$01,$01,$04,$01,$04,$01,$01,$06,$02,$01,$01,$01,$01,$01,$01,$02,$01,$01,$01,$01,$01,$01,$02,$06
00001ED6= 0001 0001 0004 0...     1746              DC.W    $01,$01,$04,$01,$04,$01,$01,$06,$01,$01,$04,$01,$04,$01,$01,$06,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06
00001F16= 0002 0001 0004 0...     1747              DC.W    $02,$01,$04,$02,$04,$01,$02,$06,$02,$01,$04,$02,$04,$01,$02,$06,$03,$02,$01,$01,$01,$02,$01,$01,$01,$02,$02,$01,$01,$02,$03,$06
00001F56= 0002 0002 0004 0...     1748              DC.W    $02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06,$03,$03,$03,$04,$04,$04,$04,$04,$04,$04,$04,$03,$03,$03,$03,$06
00001F96= 0002 0002 0004 0...     1749              DC.W    $02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06
00001FD6= 0002 0002 0004 0...     1750              DC.W    $02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06,$01,$01,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$01,$01,$06
00002016= 0003 0002 0004 0...     1751              DC.W    $03,$02,$04,$03,$04,$02,$03,$06,$03,$02,$04,$03,$04,$02,$03,$06,$02,$01,$01,$01,$01,$01,$01,$02,$01,$01,$01,$01,$01,$01,$02,$06
00002056= 0003 0003 0004 0...     1752              DC.W    $03,$03,$04,$03,$04,$03,$03,$06,$03,$03,$04,$03,$04,$03,$03,$06,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06
00002096= 0004 0003 0004 0...     1753              DC.W    $04,$03,$04,$04,$04,$03,$04,$06,$04,$03,$04,$04,$04,$03,$04,$06,$03,$02,$01,$01,$01,$02,$01,$01,$01,$02,$02,$01,$01,$02,$03,$06
000020D6= 0004 0004 0004 0...     1754              DC.W    $04,$04,$04,$05,$04,$04,$04,$06,$04,$04,$04,$05,$04,$04,$04,$06,$03,$03,$03,$04,$04,$04,$04,$04,$04,$04,$04,$03,$03,$03,$03,$06
00002116= 0006 0006 0006 0...     1755              DC.W    $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06
00002156= 0001 0001 0000 0...     1756              DC.W    $01,$01,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$01,$01,$06,$01,$00,$04,$00,$04,$00,$01,$06,$01,$00,$04,$00,$04,$00,$01,$06
00002196= 0002 0001 0001 0...     1757              DC.W    $02,$01,$01,$01,$01,$01,$01,$02,$01,$01,$01,$01,$01,$01,$02,$06,$01,$01,$04,$01,$04,$01,$01,$06,$01,$01,$04,$01,$04,$01,$01,$06
000021D6= 0002 0002 0002 0...     1758              DC.W    $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$06,$01,$01,$04,$01,$04,$01,$01,$06,$01,$01,$04,$01,$04,$01,$01,$06
00002216= 0003 0002 0001 0...     1759              DC.W    $03,$02,$01,$01,$01,$02,$01,$01,$01,$02,$02,$01,$01,$02,$03,$06,$02,$01,$04,$02,$04,$01,$02,$06,$02,$01,$04,$02,$04,$01,$02,$06
00002256= 0003 0003 0003 0...     1760              DC.W    $03,$03,$03,$04,$04,$04,$04,$04,$04,$04,$04,$03,$03,$03,$03,$06,$02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06
00002296= 0006 0006 0006 0...     1761              DC.W    $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06
000022D6= 0001 0001 0000 0...     1762              DC.W    $01,$01,$00,$00,$00,$00,$01,$01,$01,$00,$00,$00,$00,$01,$01,$06,$02,$02,$04,$02,$04,$02,$02,$06,$02,$02,$04,$02,$04,$02,$02,$06
00002316= 0003 0002 0004 0...     1763              DC.W    $03,$02,$04,$03,$04,$02,$03,$06,$03,$02,$04,$03,$04,$02,$03,$06,$03,$02,$04,$03,$04,$02,$03,$06,$03,$02,$04,$03,$04,$02,$03,$06
00002356= 0002 0001 0001 0...     1764              DC.W    $02,$01,$01,$01,$01,$01,$01,$02,$01,$01,$01,$01,$01,$01,$02,$06,$03,$03,$04,$03,$04,$03,$03,$06,$03,$03,$04,$03,$04,$03,$03,$06
00002396= 0003 0002 0001 0...     1765              DC.W    $03,$02,$01,$01,$01,$02,$01,$01,$01,$02,$02,$01,$01,$02,$03,$06,$04,$03,$04,$04,$04,$03,$04,$06,$04,$03,$04,$04,$04,$03,$04,$06
000023D6= 0003 0003 0003 0...     1766              DC.W    $03,$03,$03,$04,$04,$04,$04,$04,$04,$04,$04,$03,$03,$03,$03,$06,$04,$04,$04,$05,$04,$04,$04,$06,$04,$04,$04,$05,$04,$04,$04,$06
00002416= 0006 0006 0006 0...     1767              DC.W    $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06
00002456= 0000 0001 0001 0...     1768              DC.W    $00,$01,$01,$02,$02,$03,$06,$06,$06,$03,$02,$02,$01,$01,$00,$06,$06,$03,$02,$02,$01,$01,$00,$06,$00,$01,$01,$02,$02,$03,$06,$06
00002496= 0001 0001 0002 0...     1769              DC.W    $01,$01,$02,$02,$03,$06,$02,$06,$02,$06,$03,$02,$02,$01,$01,$06,$02,$06,$03,$02,$02,$01,$01,$06,$01,$01,$02,$02,$03,$06,$02,$06
000024D6= 0001 0002 0002 0...     1770              DC.W    $01,$02,$02,$03,$06,$01,$02,$06,$02,$01,$06,$03,$02,$02,$01,$06,$02,$01,$06,$03,$02,$02,$01,$06,$01,$02,$02,$03,$06,$01,$02,$06
00002516= 0002 0002 0003 0...     1771              DC.W    $02,$02,$03,$06,$01,$02,$03,$06,$03,$02,$01,$06,$03,$02,$02,$06,$03,$02,$01,$06,$03,$02,$02,$06,$02,$02,$03,$06,$01,$02,$03,$06
00002556= 0002 0003 0006 0...     1772              DC.W    $02,$03,$06,$01,$02,$03,$03,$06,$03,$03,$02,$01,$06,$03,$02,$06,$03,$03,$02,$01,$06,$03,$02,$06,$02,$03,$06,$01,$02,$03,$03,$06
00002596= 0003 0006 0001 0...     1773              DC.W    $03,$06,$01,$02,$03,$03,$04,$06,$04,$03,$03,$02,$01,$06,$03,$06,$04,$03,$03,$02,$01,$06,$03,$06,$03,$06,$01,$02,$03,$03,$04,$06
000025D6= 0006 0002 0002 0...     1774              DC.W    $06,$02,$02,$03,$03,$04,$05,$06,$05,$04,$03,$03,$02,$02,$06,$06,$05,$04,$03,$03,$02,$02,$06,$06,$06,$02,$02,$03,$03,$04,$05,$06
00002616= 0006 0006 0006 0...     1775              DC.W    $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06
00002656                          1776  
00002656                          1777  
00002656                          1778  
00002656                          1779  
00002656                          1780  -------------------- end include --------------------
00002656                          1781      INCLUDE "CASILLA.X68"
00002656                          1782  
00002656                          1783  CASPLOT:
00002656                          1784  
00002656  48A7 07FE               1785      MOVEM.W D5-D7/A0-A6, -(A7) 
0000265A                          1786      
0000265A                          1787      ;LEEMOS LA CASILLA EN MEMORIA
0000265A  41F8 1E56               1788      LEA.L   CASDATA,A0
0000265E                          1789      
0000265E                          1790      ;GUARDAMOS LOS REGISTROS, EL MÉTODO PRINCIPAL LOS USA
0000265E  3A01                    1791      MOVE.W  D1,D5
00002660  3C02                    1792      MOVE.W  D2,D6
00002662  3E03                    1793      MOVE.W  D3,D7
00002664  3244                    1794      MOVE.W  D4,A1
00002666                          1795      
00002666                          1796      ;AJUSTAMOS UNOS VALORES
00002666  3802                    1797      MOVE.W  D2,D4
00002668  5244                    1798      ADDQ.W  #1,D4
0000266A                          1799      
0000266A                          1800      ;INICIO DEL BUCLE QUE RECORRE LA MATRIZ CASILLA
0000266A                          1801  .SEGX
0000266A  3605                    1802      MOVE.W  D5,D3
0000266C                          1803  .SEG    
0000266C  5344                    1804      SUBQ.W  #1,D4
0000266E                          1805          
0000266E                          1806      ;MIRAMOS DE QUE COLOR ES EL PÍXEL    
0000266E  0C50 0000               1807      CMP.W   #$00,(A0)
00002672  6700 0032               1808      BEQ     .MARMOS
00002676  0C50 0001               1809      CMP.W   #$01,(A0)
0000267A  6700 0046               1810      BEQ     .OCRTRA
0000267E  0C50 0002               1811      CMP.W   #$02,(A0)
00002682  6700 005A               1812      BEQ     .MADNOG
00002686  0C50 0003               1813      CMP.W   #$03,(A0)
0000268A  6700 006E               1814      BEQ     .CAFTSTINT
0000268E  0C50 0004               1815      CMP.W   #$04,(A0)
00002692  6700 0082               1816      BEQ     .TRAHUM
00002696  0C50 0005               1817      CMP.W   #$05,(A0)
0000269A  6700 0096               1818      BEQ     .MADCBZ
0000269E  0C50 0006               1819      CMP.W   #$06,(A0)
000026A2  6700 00AA               1820      BEQ     .BRZVEJ
000026A6                          1821      
000026A6                          1822      ;SEGÚN EL COLOR, COLOCAMOS LA BROCHA
000026A6                          1823  .MARMOS 
000026A6                          1824      ; SET CONTOUR COLOR
000026A6  103C 0050               1825      MOVE.B  #80,D0
000026AA  223C 002873A6           1826      MOVE.L  #MARRONMOSTAZA,D1
000026B0  4E4F                    1827      TRAP    #15
000026B2                          1828              
000026B2                          1829      ; SET FILL COLOR
000026B2  103C 0051               1830      MOVE.B  #81,D0
000026B6  223C 002873A6           1831      MOVE.L  #MARRONMOSTAZA,D1
000026BC  4E4F                    1832      TRAP    #15
000026BE  6000 00A6               1833      BRA     .FINCOL
000026C2                          1834  
000026C2                          1835  .OCRTRA
000026C2                          1836      ; SET CONTOUR COLOR
000026C2  103C 0050               1837      MOVE.B  #80,D0
000026C6  223C 001C5074           1838      MOVE.L  #OCRETIERRA,D1
000026CC  4E4F                    1839      TRAP    #15
000026CE                          1840              
000026CE                          1841      ; SET FILL COLOR
000026CE  103C 0051               1842      MOVE.B  #81,D0
000026D2  223C 001C5074           1843      MOVE.L  #OCRETIERRA,D1
000026D8  4E4F                    1844      TRAP    #15
000026DA  6000 008A               1845      BRA     .FINCOL
000026DE                          1846  
000026DE                          1847  .MADNOG
000026DE                          1848      ; SET CONTOUR COLOR
000026DE  103C 0050               1849      MOVE.B  #80,D0
000026E2  223C 00143851           1850      MOVE.L  #MADERANOGAL,D1
000026E8  4E4F                    1851      TRAP    #15
000026EA                          1852              
000026EA                          1853      ; SET FILL COLOR
000026EA  103C 0051               1854      MOVE.B  #81,D0
000026EE  223C 00143851           1855      MOVE.L  #MADERANOGAL,D1
000026F4  4E4F                    1856      TRAP    #15
000026F6  6000 006E               1857      BRA     .FINCOL
000026FA                          1858  
000026FA                          1859  .CAFTSTINT    
000026FA                          1860      ; SET CONTOUR COLOR
000026FA  103C 0050               1861      MOVE.B  #80,D0
000026FE  223C 000E2739           1862      MOVE.L  #CAFETOSTADOINTENSO,D1
00002704  4E4F                    1863      TRAP    #15
00002706                          1864              
00002706                          1865      ; SET FILL COLOR
00002706  103C 0051               1866      MOVE.B  #81,D0
0000270A  223C 000E2739           1867      MOVE.L  #CAFETOSTADOINTENSO,D1
00002710  4E4F                    1868      TRAP    #15
00002712  6000 0052               1869      BRA     .FINCOL
00002716                          1870  
00002716                          1871  .TRAHUM
00002716                          1872      ; SET CONTOUR COLOR
00002716  103C 0050               1873      MOVE.B  #80,D0
0000271A  223C 000A1B28           1874      MOVE.L  #TIERRAHUMEDA,D1
00002720  4E4F                    1875      TRAP    #15
00002722                          1876              
00002722                          1877      ; SET FILL COLOR
00002722  103C 0051               1878      MOVE.B  #81,D0
00002726  223C 000A1B28           1879      MOVE.L  #TIERRAHUMEDA,D1
0000272C  4E4F                    1880      TRAP    #15
0000272E  6000 0036               1881      BRA     .FINCOL
00002732                          1882  
00002732                          1883  .MADCBZ
00002732                          1884      ; SET CONTOUR COLOR
00002732  103C 0050               1885      MOVE.B  #80,D0
00002736  223C 0007131C           1886      MOVE.L  #MADERACARBONIZADA,D1
0000273C  4E4F                    1887      TRAP    #15
0000273E                          1888              
0000273E                          1889      ; SET FILL COLOR
0000273E  103C 0051               1890      MOVE.B  #81,D0
00002742  223C 0007131C           1891      MOVE.L  #MADERACARBONIZADA,D1
00002748  4E4F                    1892      TRAP    #15
0000274A  6000 001A               1893      BRA     .FINCOL
0000274E                          1894  
0000274E                          1895  .BRZVEJ        
0000274E                          1896      ; SET CONTOUR COLOR
0000274E  103C 0050               1897      MOVE.B  #80,D0
00002752  223C 00001E30           1898      MOVE.L  #BRONCEVIEJO,D1
00002758  4E4F                    1899      TRAP    #15
0000275A                          1900              
0000275A                          1901      ; SET FILL COLOR
0000275A  103C 0051               1902      MOVE.B  #81,D0
0000275E  223C 00001E30           1903      MOVE.L  #BRONCEVIEJO,D1
00002764  4E4F                    1904      TRAP    #15
00002766                          1905  
00002766                          1906  .FINCOL
00002766                          1907      
00002766                          1908      ;FIJAMOS COORDENADAS
00002766  3203                    1909      MOVE.W  D3,D1
00002768  3404                    1910      MOVE.W  D4,D2
0000276A  5243                    1911      ADDQ.W  #1,D3
0000276C  5244                    1912      ADDQ.W  #1,D4
0000276E                          1913      
0000276E                          1914      ; DRAW RECTANGLE (CASILLA)
0000276E  103C 0057               1915      MOVE.B  #87,D0
00002772  4E4F                    1916      TRAP    #15
00002774                          1917             
00002774                          1918      ;INCREMENTAMOS A0
00002774  5488                    1919      ADDQ.L  #2,A0       
00002776                          1920             
00002776                          1921      ;COMPROBAMOS EL BUCLE 
00002776  BE43                    1922      CMP.W   D3,D7
00002778  6600 FEF2               1923      BNE     .SEG
0000277C  B2C4                    1924      CMP.W   D4,A1
0000277E  6600 FEEA               1925      BNE     .SEGX
00002782                          1926      ;RESTAURAMOS
00002782  3205                    1927      MOVE.W  D5,D1
00002784  3406                    1928      MOVE.W  D6,D2
00002786  3607                    1929      MOVE.W  D7,D3
00002788  3809                    1930      MOVE.W  A1,D4
0000278A                          1931  
0000278A  4C9F 7FE0               1932      MOVEM.W (A7)+,D5-D7/A0-A6
0000278E                          1933  RTS
0000278E                          1934  -------------------- end include --------------------
0000278E                          1935      INCLUDE "GAME.X68"
0000278E                          1936  
0000278E                          1937  ; ----------------------------------------------------------
0000278E                          1938  GAMINIT
0000278E                          1939  ; INITIALIZES GAME
0000278E                          1940  ; INPUT    : NONE
0000278E                          1941  ; OUTPUT   : NONE
0000278E                          1942  ; MODIFIES : NONE
0000278E                          1943  ; ----------------------------------------------------------
0000278E                          1944              
0000278E  4EB8 1000               1945              JSR     DMMINIT
00002792  4EB8 1B1E               1946              JSR     SCOINIT 
00002796                          1947              
00002796  4279 00002C84           1948              CLR.W   (TANID)
0000279C  48E7 E070               1949              MOVEM.L D0-D2/A1-A3,-(A7)
000027A0  43F8 1810               1950              LEA     TANINIT,A1
000027A4  45F8 188A               1951              LEA     TANUPD,A2
000027A8  47F8 1A9C               1952              LEA     TANPLOT,A3
000027AC  303C 0002               1953              MOVE.W  #TANPLAY,D0   ; AGENTE TIPO 2 (TANQUE JUGADOR)
000027B0  323C 0032               1954              MOVE.W  #PLRINITX,D1
000027B4  343C 00F0               1955              MOVE.W  #PLRINITY,D2
000027B8  4EB8 1302               1956              JSR     AGLADD
000027BC                          1957  
000027BC  303C 0003               1958              MOVE.W  #TANENEM,D0
000027C0  323C 021C               1959              MOVE.W  #SCRWIDTH-100,D1    ; ENEMIGO 1
000027C4  343C 017C               1960              MOVE.W  #SCRHEIGH-100,D2
000027C8  5279 00002C84           1961              ADDQ.W  #1,(TANID)   ; provoca que no sean independientes los tanques enemigos ?
000027CE  3639 00002C84           1962              MOVE.W  (TANID),D3
000027D4  4EB8 1302               1963              JSR     AGLADD
000027D8                          1964              
000027D8  323C 021C               1965              MOVE.W  #SCRWIDTH-100,D1    ; ENEMIGO 2
000027DC  343C 00B4               1966              MOVE.W  #SCRHEIGH-300,D2
000027E0  5279 00002C84           1967              ADDQ.W  #1,(TANID)
000027E6  3639 00002C84           1968              MOVE.W  (TANID),D3
000027EC  4EB8 1302               1969              JSR     AGLADD
000027F0                          1970              
000027F0  4CDF 0E07               1971              MOVEM.L (A7)+,D0-D2/A1-A3
000027F4  4E75                    1972              RTS           
000027F6                          1973              
000027F6                          1974              ; Seguir inicializando tanques bot (tipo 3)
000027F6                          1975  
000027F6                          1976  ; ----------------------------------------------------------
000027F6                          1977  GAMUPD
000027F6                          1978  ; UPDATES THE GAME
000027F6                          1979  ; INPUT    : NONE
000027F6                          1980  ; OUTPUT   : NONE
000027F6                          1981  ; MODIFIES : NONE
000027F6                          1982  ; ----------------------------------------------------------
000027F6                          1983  
000027F6  4EB8 131C               1984              JSR     AGLUPD
000027FA                          1985              
000027FA  0C79 0002 00002C80      1986              CMP.W   #SCOKILMX,(SCORE)
00002802  6D00 000E               1987              BLT     .CHKLOSS
00002806  33FC 0003 00002C8C      1988              MOVE.W  #3,(STANEXT)
0000280E  6000 0016               1989              BRA     .DONE
00002812                          1990  .CHKLOSS            
00002812  0C79 0001 00002C8E      1991              CMP.W   #KILLPLYR,(PLYRDEAD)    ; SI EL JUGADOR TIENE 0 DE VIDA
0000281A  6D00 000A               1992              BLT     .DONE
0000281E  33FC 0004 00002C8C      1993              MOVE.W  #4,(STANEXT)
00002826                          1994              
00002826  4E75                    1995  .DONE       RTS
00002828                          1996              
00002828                          1997  ; ----------------------------------------------------------
00002828                          1998  GAMPLOT
00002828                          1999  ; PLOTS THE GAME
00002828                          2000  ; INPUT    : NONE
00002828                          2001  ; OUTPUT   : NONE
00002828                          2002  ; MODIFIES : NONE
00002828                          2003  ; ----------------------------------------------------------
00002828                          2004              
00002828  4EB8 1B68               2005              JSR     MAPPLOT
0000282C  4EB8 1340               2006              JSR     AGLPLOT
00002830                          2007      
00002830  6000 F2F4               2008              BRA     SCOPLOT    
00002834                          2009  
00002834                          2010  
00002834                          2011  
00002834                          2012  
00002834                          2013  
00002834                          2014  
00002834                          2015  
00002834                          2016  
00002834                          2017  
00002834                          2018  
00002834                          2019  
00002834                          2020  
00002834                          2021  -------------------- end include --------------------
00002834                          2022      INCLUDE "INTRO.X68"
00002834                          2023  ; ==============================================================================
00002834                          2024  ; INTRO SCREEN
00002834                          2025  ; ==============================================================================
00002834                          2026  
00002834                          2027  ; ------------------------------------------------------------------------------
00002834                          2028  ISCINIT
00002834                          2029  ; INTRO SCREEN INIT
00002834                          2030  ; INPUT    : NONE
00002834                          2031  ; OUTPUT   : NONE
00002834                          2032  ; MODIFIES : NONE
00002834                          2033  ; ------------------------------------------------------------------------------
00002834  4279 00002C86           2034              CLR.W   (ISCTIMER)  
0000283A  4E75                    2035              RTS
0000283C                          2036  
0000283C                          2037  ; ------------------------------------------------------------------------------
0000283C                          2038  ISCUPD
0000283C                          2039  ; INTRO SCREEN UPDATE
0000283C                          2040  ; INPUT    : NONE
0000283C                          2041  ; OUTPUT   : NONE
0000283C                          2042  ; MODIFIES : NONE
0000283C                          2043  ; ------------------------------------------------------------------------------
0000283C                          2044              
0000283C  0839 0004 00002C93      2045              BTST.B  #4,(KBDEDGE)
00002844  6700 000C               2046              BEQ     .CONT
00002848  33FC 0002 00002C8C      2047              MOVE.W  #2,(STANEXT)
00002850  4E75                    2048              RTS
00002852                          2049              
00002852  5279 00002C86           2050  .CONT       ADDQ.W  #1,(ISCTIMER)
00002858  0C79 01F4 00002C86      2051              CMP.W   #ISCMAXTM,(ISCTIMER)
00002860  6D00 000C               2052              BLT     .DONE
00002864  33FC 0001 00002C8C      2053              MOVE.W  #1,(STANEXT)
0000286C  4E75                    2054              RTS
0000286E                          2055       
0000286E  1E3C 0000               2056  .DONE       MOVE.B  #SNDINTRO,D7
00002872  4E43                    2057              TRAP    #SNDPLTN
00002874  4E75                    2058              RTS
00002876                          2059  
00002876                          2060  ; ------------------------------------------------------------------------------
00002876                          2061  ISCPLOT
00002876                          2062  ; INTRO SCREEN PLOT
00002876                          2063  ; INPUT    : NONE
00002876                          2064  ; OUTPUT   : NONE
00002876                          2065  ; MODIFIES : NONE
00002876                          2066  ; ------------------------------------------------------------------------------
00002876  48E7 C080               2067              MOVEM.L D0-D1/A0,-(A7)
0000287A                          2068              
0000287A  4281                    2069              CLR.L   D1                      ; DEFINIR COLOR NEGRO
0000287C  103C 0051               2070              MOVE.B  #81,D0
00002880  4E4F                    2071              TRAP    #15
00002882                          2072              
00002882  41F9 000028B0           2073              LEA     .TXT1,A0
00002888  103C 000A               2074              MOVE.B  #10,D0
0000288C  4EB8 137C               2075              JSR     UTLPRINT
00002890                          2076              
00002890  0839 0004 00002C98      2077              BTST.B  #4,(SCRCYCCT)           ; PARPADEO MENSAJE
00002898  6700 0010               2078              BEQ     .DONE
0000289C                          2079              
0000289C  41F9 000028BA           2080              LEA     .TXT2,A0
000028A2  103C 0019               2081              MOVE.B  #25,D0
000028A6  4EB8 137C               2082              JSR     UTLPRINT
000028AA                          2083              
000028AA  4CDF 0103               2084  .DONE       MOVEM.L (A7)+,D0-D1/A0
000028AE                          2085  
000028AE  4E75                    2086              RTS
000028B0= 54 41 4E 4B 53 20 ...   2087  .TXT1       DC.B    'TANKS 68K',0
000028BA= A1 50 52 45 53 49 ...   2088  .TXT2       DC.B    '¡PRESIONA LA BARRA ESPACIADORA PARA EMPEZAR!',0
000028E8                          2089              DS.W    0
000028E8                          2090  
000028E8                          2091  
000028E8                          2092  
000028E8                          2093  
000028E8                          2094  
000028E8                          2095  -------------------- end include --------------------
000028E8                          2096      INCLUDE "INSTRUCTIONS.X68"
000028E8                          2097  ; ==============================================================================
000028E8                          2098  ; INSTRUCTIONS SCREEN
000028E8                          2099  ; ==============================================================================
000028E8                          2100  
000028E8                          2101  ; ------------------------------------------------------------------------------
000028E8                          2102  INSINIT
000028E8                          2103  ; INSTRUCTIONS SCREEN INIT
000028E8                          2104  ; INPUT    : NONE
000028E8                          2105  ; OUTPUT   : NONE
000028E8                          2106  ; MODIFIES : NONE
000028E8                          2107  ; ------------------------------------------------------------------------------
000028E8  4279 00002C88           2108              CLR.W   (INSTIMER)
000028EE  4E75                    2109              RTS
000028F0                          2110  
000028F0                          2111  ; ------------------------------------------------------------------------------
000028F0                          2112  INSUPD
000028F0                          2113  ; INSTRUCTIONS SCREEN UPDATE
000028F0                          2114  ; INPUT    : NONE
000028F0                          2115  ; OUTPUT   : NONE
000028F0                          2116  ; MODIFIES : NONE
000028F0                          2117  ; ------------------------------------------------------------------------------
000028F0  0839 0004 00002C93      2118              BTST.B  #4,(KBDEDGE)
000028F8  6700 0008               2119              BEQ     .CONT
000028FC  4279 00002C8C           2120              CLR.W   (STANEXT)
00002902  5279 00002C88           2121  .CONT       ADDQ.W  #1,(INSTIMER)
00002908  0C79 01F4 00002C88      2122              CMP.W   #INSMAXTM,(INSTIMER)
00002910  6D00 000A               2123              BLT     .DONE
00002914  4279 00002C8C           2124              CLR.W   (STANEXT)
0000291A  4E75                    2125              RTS
0000291C                          2126   
0000291C  1E3C 0001               2127  .DONE       MOVE.B  #SNDINSTR,D7
00002920  4E43                    2128              TRAP    #SNDPLTN
00002922  4E75                    2129              RTS
00002924                          2130  
00002924                          2131  ; ------------------------------------------------------------------------------
00002924                          2132  INSPLOT
00002924                          2133  ; INSTRUCTIONS SCREEN PLOT
00002924                          2134  ; INPUT    : NONE
00002924                          2135  ; OUTPUT   : NONE
00002924                          2136  ; MODIFIES : NONE
00002924                          2137  ; ------------------------------------------------------------------------------
00002924                          2138  
00002924  48E7 C0C0               2139              MOVEM.L D0-D1/A0-A1,-(A7)
00002928  4281                    2140              CLR.L   D1
0000292A  103C 0051               2141              MOVE.B  #81,D0
0000292E  4E4F                    2142              TRAP    #15
00002930  103C 000B               2143              MOVE.B  #11,D0
00002934  43F9 00002A62           2144              LEA     .TXTLST,A1
0000293A  2219                    2145  .LOOP       MOVE.L  (A1)+,D1
0000293C  6700 000A               2146              BEQ     .LOOPEND
00002940  2041                    2147              MOVE.L  D1,A0
00002942  4EB8 137C               2148              JSR     UTLPRINT
00002946  60F2                    2149              BRA     .LOOP
00002948                          2150  .LOOPEND            
00002948  0839 0004 00002C98      2151              BTST.B  #4,(SCRCYCCT)           ; PARPADEO MENSAJE
00002950  6700 0010               2152              BEQ     .DONE
00002954                          2153              
00002954  41F9 00002A34           2154              LEA     .TXT6,A0
0000295A  103C 0019               2155              MOVE.B  #25,D0
0000295E  4EB8 137C               2156              JSR     UTLPRINT
00002962                          2157  
00002962  4CDF 0303               2158  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
00002966  4E75                    2159              RTS
00002968= A1 42 49 45 4E 56 ...   2160  .TXT1       DC.B    '¡BIENVENIDO A TANKS 68K!',0
00002981= 54 55 20 4F 42 4A ...   2161  .TXT2       DC.B    'TU OBJETIVO ES SUPERAR TODOS LOS NIVELES.',0
000029AB= 50 41 52 41 20 45 ...   2162  .TXT3       DC.B    'PARA ELLO, DEBES DERROTAR A TODOS LOS TANQUES ENEMIGOS',0
000029E2= 50 41 52 41 20 4D ...   2163  .TXT4       DC.B    'PARA MOVERTE UTILIZA LAS TECLAS WASD,',0
00002A08= 50 41 52 41 20 44 ...   2164  .TXT5       DC.B    'PARA DISPARAR PRESIONA LA BARRA ESPACIADORA',0
00002A34= 50 55 4C 53 41 20 ...   2165  .TXT6       DC.B    'PULSA ESPACIO PARA REGRESAR AL MENÚ PRINCIPAL',0
00002A62                          2166              DS.W    0
00002A62= 00002968 00002981 ...   2167  .TXTLST     DC.L    .TXT1,.TXT2,.TXT3,.TXT4,.TXT5,0
00002A7A                          2168  
00002A7A                          2169  
00002A7A                          2170  
00002A7A                          2171  
00002A7A                          2172  -------------------- end include --------------------
00002A7A                          2173      INCLUDE "WIN.X68"
00002A7A                          2174  ; ==============================================================================
00002A7A                          2175  ; VICTORY SCREEN
00002A7A                          2176  ; ==============================================================================
00002A7A                          2177  
00002A7A                          2178  ; ------------------------------------------------------------------------------
00002A7A                          2179  WINUPD
00002A7A                          2180  ; VICTORY SCREEN UPDATE
00002A7A                          2181  ; INPUT    : NONE
00002A7A                          2182  ; OUTPUT   : NONE
00002A7A                          2183  ; MODIFIES : NONE
00002A7A                          2184  ; ------------------------------------------------------------------------------
00002A7A                          2185              
00002A7A  0839 0004 00002C93      2186              BTST.B  #4,(KBDEDGE)
00002A82  6700 000A               2187              BEQ     .CONT
00002A86  4279 00002C8C           2188              CLR.W   (STANEXT)
00002A8C  4E75                    2189              RTS
00002A8E                          2190  
00002A8E  1E3C 000A               2191  .CONT       MOVE.B  #SNDWIN,D7
00002A92  4E43                    2192              TRAP    #SNDPLTN
00002A94  4E75                    2193              RTS
00002A96                          2194  
00002A96                          2195  ; ------------------------------------------------------------------------------
00002A96                          2196  WINPLOT
00002A96                          2197  ; VICTORY SCREEN PLOT
00002A96                          2198  ; INPUT    : NONE
00002A96                          2199  ; OUTPUT   : NONE
00002A96                          2200  ; MODIFIES : NONE
00002A96                          2201  ; ------------------------------------------------------------------------------
00002A96  48E7 C080               2202              MOVEM.L D0-D1/A0,-(A7)
00002A9A                          2203              
00002A9A  4281                    2204              CLR.L   D1
00002A9C  103C 0051               2205              MOVE.B  #81,D0
00002AA0  4E4F                    2206              TRAP    #15
00002AA2                          2207              
00002AA2  41F9 00002AD0           2208              LEA     .TXT1,A0
00002AA8  103C 000A               2209              MOVE.B  #10,D0
00002AAC  4EB8 137C               2210              JSR     UTLPRINT
00002AB0                          2211              
00002AB0  0839 0004 00002C98      2212              BTST.B  #4,(SCRCYCCT)
00002AB8  6700 0010               2213              BEQ     .DONE
00002ABC                          2214              
00002ABC  41F9 00002ADD           2215              LEA     .TXT2,A0
00002AC2  103C 0019               2216              MOVE.B  #25,D0
00002AC6  4EB8 137C               2217              JSR     UTLPRINT
00002ACA                          2218              
00002ACA  4CDF 0103               2219  .DONE       MOVEM.L (A7)+,D0-D1/A0
00002ACE                          2220  
00002ACE  4E75                    2221              RTS
00002AD0= A1 48 41 53 20 47 ...   2222  .TXT1       DC.B    '¡HAS GANADO!',0
00002ADD= A1 50 52 45 53 49 ...   2223  .TXT2       DC.B    '¡PRESIONA LA BARRA ESPACIADORA PARA VOLVER A EMPEZAR!',0
00002B14                          2224              DS.W    0
00002B14                          2225  
00002B14                          2226  
00002B14                          2227  
00002B14                          2228  
00002B14                          2229  
00002B14                          2230  -------------------- end include --------------------
00002B14                          2231      INCLUDE "GOVER.X68"
00002B14                          2232  ; ==============================================================================
00002B14                          2233  ; GAME OVER SCREEN
00002B14                          2234  ; ==============================================================================
00002B14                          2235  
00002B14                          2236  ; ------------------------------------------------------------------------------
00002B14                          2237  GOVINIT
00002B14                          2238  ; GAME OVER SCREEN INIT
00002B14                          2239  ; INPUT    : NONE
00002B14                          2240  ; OUTPUT   : NONE
00002B14                          2241  ; MODIFIES : NONE
00002B14                          2242  ; ------------------------------------------------------------------------------
00002B14  1E3C 0008               2243              MOVE.B  #SNDGVR1,D7
00002B18  4E43                    2244              TRAP    #SNDPLTN
00002B1A  4E75                    2245              RTS
00002B1C                          2246  
00002B1C                          2247  ; ------------------------------------------------------------------------------
00002B1C                          2248  GOVUPD
00002B1C                          2249  ; GAME OVER SCREEN UPDATE
00002B1C                          2250  ; INPUT    : NONE
00002B1C                          2251  ; OUTPUT   : NONE
00002B1C                          2252  ; MODIFIES : NONE
00002B1C                          2253  ; ------------------------------------------------------------------------------
00002B1C                          2254              
00002B1C  0839 0004 00002C93      2255              BTST.B  #4,(KBDEDGE)
00002B24  6700 000A               2256              BEQ     .CONT
00002B28  4279 00002C8C           2257              CLR.W   (STANEXT)
00002B2E  4E75                    2258              RTS
00002B30                          2259  
00002B30                          2260  .CONT       ;MOVE.B  #SNDGVR2,D7
00002B30                          2261              ;TRAP    #SNDPLTN
00002B30  4E75                    2262              RTS
00002B32                          2263  
00002B32                          2264  ; ------------------------------------------------------------------------------
00002B32                          2265  GOVPLOT
00002B32                          2266  ; GAME OVER SCREEN PLOT
00002B32                          2267  ; INPUT    : NONE
00002B32                          2268  ; OUTPUT   : NONE
00002B32                          2269  ; MODIFIES : NONE
00002B32                          2270  ; ------------------------------------------------------------------------------
00002B32  48E7 C080               2271              MOVEM.L D0-D1/A0,-(A7)
00002B36                          2272              
00002B36  4281                    2273              CLR.L   D1
00002B38  103C 0051               2274              MOVE.B  #81,D0
00002B3C  4E4F                    2275              TRAP    #15
00002B3E                          2276              
00002B3E  41F9 00002B6C           2277              LEA     .TXT1,A0
00002B44  103C 000A               2278              MOVE.B  #10,D0
00002B48  4EB8 137C               2279              JSR     UTLPRINT
00002B4C                          2280              
00002B4C  0839 0004 00002C98      2281              BTST.B  #4,(SCRCYCCT)
00002B54  6700 0010               2282              BEQ     .DONE
00002B58                          2283              
00002B58  41F9 00002B79           2284              LEA     .TXT2,A0
00002B5E  103C 0019               2285              MOVE.B  #25,D0
00002B62  4EB8 137C               2286              JSR     UTLPRINT
00002B66                          2287              
00002B66  4CDF 0103               2288  .DONE       MOVEM.L (A7)+,D0-D1/A0
00002B6A                          2289  
00002B6A  4E75                    2290              RTS
00002B6C= 47 41 4D 45 20 4F ...   2291  .TXT1       DC.B    'GAME OVER :(',0
00002B79= A1 50 52 45 53 49 ...   2292  .TXT2       DC.B    '¡PRESIONA LA BARRA ESPACIADORA PARA CONTINUAR!',0
00002BA8                          2293              DS.W    0
00002BA8                          2294  
00002BA8                          2295  
00002BA8                          2296  
00002BA8                          2297  
00002BA8                          2298  -------------------- end include --------------------
00002BA8                          2299      INCLUDE "STATES.X68"
00002BA8                          2300  ; =============================================================================
00002BA8                          2301  ; GAME STATE MANAGEMENT
00002BA8                          2302  ; =============================================================================
00002BA8                          2303  
00002BA8                          2304  ; -----------------------------------------------------------------------------
00002BA8                          2305  STAINIT
00002BA8                          2306  ; INITALIZES THE STATE MANAGER
00002BA8                          2307  ; INPUT    - NONE
00002BA8                          2308  ; OUTPUT   - NONE
00002BA8                          2309  ; MODIFIES - NONE
00002BA8                          2310  ; -----------------------------------------------------------------------------
00002BA8  33FC FFFF 00002C8A      2311              MOVE.W  #STANONE,(STACUR)
00002BB0  4279 00002C8C           2312              CLR.W   (STANEXT)
00002BB6  4E75                    2313              RTS
00002BB8                          2314  
00002BB8                          2315  ; -----------------------------------------------------------------------------
00002BB8                          2316  STAUPD
00002BB8                          2317  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00002BB8                          2318  ; INPUT    - NONE
00002BB8                          2319  ; OUTPUT   - NONE
00002BB8                          2320  ; MODIFIES - NONE
00002BB8                          2321  ; -----------------------------------------------------------------------------
00002BB8  48E7 8080               2322              MOVEM.L D0/A0,-(A7)
00002BBC  4280                    2323              CLR.L   D0
00002BBE  3039 00002C8C           2324              MOVE.W  (STANEXT),D0
00002BC4  B079 00002C8A           2325              CMP.W   (STACUR),D0
00002BCA  6700 0012               2326              BEQ     .DOUPD
00002BCE  33C0 00002C8A           2327              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00002BD4  E588                    2328              LSL.L   #2,D0
00002BD6  2040                    2329              MOVE.L  D0,A0
00002BD8  2068 2BF6               2330              MOVE.L  .INITBL(A0),A0
00002BDC  4E90                    2331              JSR     (A0)
00002BDE  4280                    2332  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00002BE0  3039 00002C8A           2333              MOVE.W  (STACUR),D0
00002BE6  E588                    2334              LSL.L   #2,D0
00002BE8  2040                    2335              MOVE.L  D0,A0
00002BEA  2068 2C0A               2336              MOVE.L  .UPDTBL(A0),A0
00002BEE  4E90                    2337              JSR     (A0)
00002BF0  4CDF 0101               2338              MOVEM.L (A7)+,D0/A0
00002BF4  4E75                    2339              RTS
00002BF6= 00002834 000028E8 ...   2340  .INITBL     DC.L    ISCINIT,INSINIT,GAMINIT,STAEMPTY,GOVINIT
00002C0A= 0000283C 000028F0 ...   2341  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMUPD,WINUPD,GOVUPD
00002C1E                          2342  
00002C1E                          2343  ; -----------------------------------------------------------------------------
00002C1E                          2344  STAPLOT
00002C1E                          2345  ; PERFORMS STATE PLOT
00002C1E                          2346  ; INPUT    - NONE
00002C1E                          2347  ; OUTPUT   - NONE
00002C1E                          2348  ; MODIFIES - NONE
00002C1E                          2349  ; -----------------------------------------------------------------------------
00002C1E  48E7 8080               2350              MOVEM.L D0/A0,-(A7)
00002C22  4280                    2351              CLR.L   D0
00002C24  3039 00002C8A           2352              MOVE.W  (STACUR),D0
00002C2A  E588                    2353              LSL.L   #2,D0
00002C2C  2040                    2354              MOVE.L  D0,A0
00002C2E  2068 2C3A               2355              MOVE.L  .PLTTBL(A0),A0
00002C32  4E90                    2356              JSR     (A0)
00002C34  4CDF 0101               2357              MOVEM.L (A7)+,D0/A0
00002C38  4E75                    2358              RTS
00002C3A= 00002876 00002924 ...   2359  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMPLOT,WINPLOT,GOVPLOT
00002C4E                          2360  
00002C4E                          2361  ; -----------------------------------------------------------------------------
00002C4E                          2362  STAEMPTY
00002C4E                          2363  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
00002C4E                          2364  ; INPUT    - NONE
00002C4E                          2365  ; OUTPUT   - NONE
00002C4E                          2366  ; MODIFIES - NONE
00002C4E                          2367  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
00002C4E                          2368  ; -----------------------------------------------------------------------------
00002C4E  4E75                    2369              RTS
00002C50                          2370  
00002C50                          2371  
00002C50                          2372  
00002C50                          2373  
00002C50                          2374  
00002C50                          2375  
00002C50                          2376  
00002C50                          2377  
00002C50                          2378  -------------------- end include --------------------
00002C50                          2379      
00002C50                          2380  START:
00002C50                          2381  
00002C50                          2382  ; --- INITIALIZATION ---------------------------------------
00002C50                          2383  
00002C50  007C 0700               2384              ORI.W   #$0700,SR   ; DESHABILITAR INTERRUPCIONES
00002C54  4EB8 10C2               2385              JSR     SYSINIT
00002C58  4EB8 1366               2386              JSR     UTLINIT
00002C5C  4EB8 2BA8               2387              JSR     STAINIT
00002C60                          2388      
00002C60                          2389  .LOOP
00002C60                          2390  
00002C60                          2391  ; --- UPDATE -----------------------------------------------
00002C60                          2392  
00002C60                          2393  ; READ INPUT DEVICES
00002C60                          2394  
00002C60  4E41                    2395              TRAP    #KBDUPTN
00002C62                          2396  ;            TRAP    #MOUUPTN
00002C62                          2397  
00002C62                          2398  ; UPDATE GAME LOGIC
00002C62                          2399      
00002C62  4EB8 2BB8               2400              JSR     STAUPD
00002C66                          2401              
00002C66                          2402  ; --- SYNC -------------------------------------------------
00002C66                          2403  
00002C66  4A39 00002C97           2404  .WINT       TST.B   (SCRINTCT)
00002C6C  67F8                    2405              BEQ     .WINT
00002C6E  4239 00002C97           2406              CLR.B   (SCRINTCT)
00002C74                          2407  
00002C74                          2408  
00002C74                          2409  ; --- PLOT -------------------------------------------------
00002C74                          2410      
00002C74  4EB8 2C1E               2411              JSR     STAPLOT         
00002C78                          2412   
00002C78  4E40                    2413              TRAP    #SCRUPTN            ; UPDATE DOUBLE BUFFER
00002C7A                          2414  
00002C7A  60E4                    2415              BRA     .LOOP
00002C7C                          2416  
00002C7C  FFFF FFFF               2417      SIMHALT
00002C80                          2418      
00002C80                          2419      INCLUDE "VARS.X68"  
00002C80                          2420  
00002C80                          2421  ; --- VARIABLES RELACIONADAS CON EL MARCADOR ---------------
00002C80                          2422  
00002C80                          2423  SCORE       DS.W    1       ; NÚMERO DE TANQUES DESTRUIDOS // (cuidado con si llega a superar 255) // podríamos hacer que se multiplique cada puntuación de tanque destruido con una cte relacionada con el tanque (diferentes tipos de tanque?)
00002C82                          2424  
00002C82                          2425  ; --- VARIABLES RELACIONADAS CON EL MAPA -------------------
00002C82                          2426  
00002C82                          2427  NUMENELIV   DS.W    1       ; NÚMERO DE ENEMIGOS VIVOS EN EL NIVEL
00002C84                          2428  
00002C84                          2429  ; --- VARIABLES RELACIONADAS CON EL TANQUE -----------------
00002C84                          2430  
00002C84                          2431  TANID       DS.W    1
00002C86                          2432  
00002C86                          2433  ; -- VARIABLES RELACIONADAS CON EL ESTADO DE INTRODUCCIÓN --
00002C86                          2434  
00002C86                          2435  ISCTIMER    DS.W    1       ; INTRO TIMER
00002C88                          2436  
00002C88                          2437  ; --- INSTRUCTIONS STATE RELATED VARIABLES -----------------
00002C88                          2438  
00002C88                          2439  INSTIMER    DS.W    1       ; INSTRUCTIONS TIMER
00002C8A                          2440  
00002C8A                          2441  ; --- VARIABLES RELACIONADAS CON LOS ESTADOS ---------------
00002C8A                          2442  
00002C8A                          2443  STACUR      DS.W    1       ; ESTADO ACTUAL
00002C8C                          2444  STANEXT     DS.W    1       ; SIGUIENTE ESTADO
00002C8E                          2445  
00002C8E                          2446  ; --- VARIABLES RELACIONADAS CON LA DERROTA ----------------
00002C8E                          2447  
00002C8E                          2448  PLYRDEAD    DS.W    1       ; PLAYER MUERTO
00002C90                          2449  
00002C90                          2450  
00002C90                          2451  
00002C90                          2452  -------------------- end include --------------------
00002C90                          2453      INCLUDE "LIB/UTLVARS.X68"
00002C90                          2454  ; =============================================================================
00002C90                          2455  ; UTILITY VARIABLES
00002C90                          2456  ; =============================================================================
00002C90                          2457  
00002C90                          2458  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00002C92                          2459              DS.W    0
00002C92                          2460  -------------------- end include --------------------
00002C92                          2461      INCLUDE "SYSVARS.X68"
00002C92                          2462  
00002C92                          2463  
00002C92                          2464  ; --- KEYBOARD RELATED VARIABLES ---------------------------
00002C92                          2465  
00002C92                          2466  KBDVAL      DS.B    1       ; KEY STATE (1 BYTE -> 8 TECLAS MAX)
00002C93                          2467  KBDEDGE     DS.B    1       ; KEY EDGE
00002C94                          2468  
00002C94                          2469  ; --- MOUSE RELATED VARIABLES ---------------------------
00002C94                          2470  
00002C94                          2471  MOUEDGE     DS.B    1       ; MOUSE EDGE
00002C95                          2472  MOUBUT      DS.B    1       ; MOUSE LEFT BUTTON
00002C96                          2473  MOUPOS      DS.B    1       ; MOUSE POSITION
00002C97                          2474  
00002C97                          2475  ; --- TIMED INTERRUPT RELATED VARIABLES --------------------
00002C97                          2476  
00002C97                          2477  SCRINTCT    DS.B    1       ; INTERRUPT COUNTER
00002C98                          2478  SCRCYCCT    DS.B    1       ; CYCLE COUNTER
00002C9A                          2479              DS.W    0
00002C9A                          2480  
00002C9A                          2481  
00002C9A                          2482  
00002C9A                          2483  -------------------- end include --------------------
00002C9A                          2484      INCLUDE "LIB/DMMVARS.X68"
00002C9A                          2485  ; =============================================================================
00002C9A                          2486  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
00002C9A                          2487  ; =============================================================================
00002C9A                          2488  
00002CC0                          2489              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00002CC0                          2490  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00003940                          2491              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00003940                          2492  -------------------- end include --------------------
00003940                          2493  
00003940                          2494      END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              1302
AGLADD:END          1318
AGLKILL             10AC
AGLPLOT             1340
AGLPLOT:END         1360
AGLPLOT:LOOP        1348
AGLUPD              131C
AGLUPD:END          133A
AGLUPD:LOOP         1324
BRONCEVIEJO         1E30
BULDMG              28
BULFCOL             7CB4BA
BULINIT             1500
BULPCOL             31494D
BULPLOT             17D6
BULRAD              4
BULSPEED            4
BULTYPE             1
BULUPD              1526
BULUPD:ALIVE        1772
BULUPD:BULFACHK     1666
BULUPD:BULFINAL     1778
BULUPD:BULWALL      16AA
BULUPD:CHKPLAY      16FC
BULUPD:CHKPLAY2     1690
BULUPD:CHKTAN       16AA
BULUPD:CHKVERT      1586
BULUPD:CHKX         1558
BULUPD:CHKY         1570
BULUPD:COLBOT       15FE
BULUPD:COLLFT       15CC
BULUPD:COLRGT       159A
BULUPD:COLTOP       1634
BULUPD:DONE         17CA
BULUPD:END          17C2
BULUPD:ENDCOLEX     16A4
BULUPD:ENSNDKIL     175E
BULUPD:EXPLO        1734
BULUPD:FABSC        1630
BULUPD:FALSC        15FA
BULUPD:FARSC        15C8
BULUPD:KILLBULL     17BC
BULUPD:LOOP         16C6
BULUPD:LOOP21       1788
BULUPD:LOOP22       17A2
BULUPD:LOOP31       1670
BULUPD:LOOP32       168A
BULUPD:NOORGX       154E
BULUPD:NOORGY       1562
BULUPD:PLAYBULL     17A8
BULUPD:RECX         157E
BULUPD:RECY         158E
CAFETOSTADOINTENSO  E2739
CASDATA             1E56
CASPLOT             2656
CASPLOT:BRZVEJ      274E
CASPLOT:CAFTSTINT   26FA
CASPLOT:FINCOL      2766
CASPLOT:MADCBZ      2732
CASPLOT:MADNOG      26DE
CASPLOT:MARMOS      26A6
CASPLOT:OCRTRA      26C2
CASPLOT:SEG         266C
CASPLOT:SEGX        266A
CASPLOT:TRAHUM      2716
DMMALLOC            1092
DMMALLOC:END        10AA
DMMBNUM             32
DMMBSIZE            40
DMMDATA             2CC0
DMMFCOM             106C
DMMFFND             107A
DMMFIRST            1022
DMMFLOOP            1060
DMMFRCOM            1034
DMMFREE             10AC
DMMFRFND            1042
DMMFRLOP            1028
DMMFRSTO            105A
DMMINIT             1000
DMMINIT:LOOP        100E
DMMNEXT             1044
DMMNEXTO            107C
DMMSYSID            0
ENEINILF            78
ENEMYRTF            64
ENESPEED            1
ENMAXBUL            1
GAMINIT             278E
GAMPLOT             2828
GAMUPD              27F6
GAMUPD:CHKLOSS      2812
GAMUPD:DONE         2826
GOVINIT             2B14
GOVPLOT             2B32
GOVPLOT:DONE        2B66
GOVPLOT:TXT1        2B6C
GOVPLOT:TXT2        2B79
GOVUPD              2B1C
GOVUPD:CONT         2B30
INSINIT             28E8
INSMAXTM            1F4
INSPLOT             2924
INSPLOT:DONE        2962
INSPLOT:LOOP        293A
INSPLOT:LOOPEND     2948
INSPLOT:TXT1        2968
INSPLOT:TXT2        2981
INSPLOT:TXT3        29AB
INSPLOT:TXT4        29E2
INSPLOT:TXT5        2A08
INSPLOT:TXT6        2A34
INSPLOT:TXTLST      2A62
INSTIMER            2C88
INSUPD              28F0
INSUPD:CONT         2902
INSUPD:DONE         291C
ISCINIT             2834
ISCMAXTM            1F4
ISCPLOT             2876
ISCPLOT:DONE        28AA
ISCPLOT:TXT1        28B0
ISCPLOT:TXT2        28BA
ISCTIMER            2C86
ISCUPD              283C
ISCUPD:CONT         2852
ISCUPD:DONE         286E
KBDDOWN             53
KBDEDGE             2C93
KBDFIRE             20
KBDINIT             126A
KBDLEFT             41
KBDPAUSE            50
KBDRIGHT            44
KBDUP               57
KBDUPD              1278
KBDUPD:LOOP         12BC
KBDUPD:PACK         12B8
KBDUPTN             1
KBDVAL              2C92
KILLPLYR            1
MADERACARBONIZADA   7131C
MADERANOGAL         143851
MAPDATA             1BFE
MAPINIT             1B64
MAPINIX             0
MAPINIY             0
MAPPIEX             14
MAPPIEY             F
MAPPLOT             1B68
MAPPLOT:LINEX       1B8A
MAPPLOT:LINEY       1B7E
MAPPLOT:PARED       1BC4
MAPPLOT:SOLEADO     1BF0
MAPUPD              1B66
MARRONMOSTAZA       2873A6
MAXTOUCH            4
MOUBUT              2C95
MOUEDGE             2C94
MOUINIT             12C6
MOUPOS              2C96
MOUUPD              12D4
MOUUPTN             2
NUMENELIV           2C82
OCRETIERRA          1C5074
PIESIZX             20
PIESIZY             20
PLMAXBUL            3
PLRINILF            190
PLRINITX            32
PLRINITY            F0
PLRLIFEC            FF
PLRLIFEH            14
PLRLIFEY            1C6
PLRSPEED            2
PLYRALIV            0
PLYRDEAD            2C8E
RTS                 278E
SCOFCOL             0
SCOINIT             1B1E
SCOKILMX            2
SCOLINE             101
SCOPLOT             1B26
SCOPLOT:TXT         1B56
SCORE               2C80
SCRCYCCT            2C98
SCRFPS              32
SCRHEIGH            1E0
SCRINIT             11FE
SCRINTCT            2C97
SCRINTN             1
SCRPLOT             1242
SCRTIM              125C
SCRUPTN             0
SCRWIDTH            280
SNDBULEX            6
SNDDISP             7
SNDGVR1             8
SNDGVR2             9
SNDHIT              3
SNDINIT             1100
SNDINIT:DONE        111E
SNDINIT:LOOP        110C
SNDINIT:SNDBULEX    1176
SNDINIT:SNDDISP     1185
SNDINIT:SNDGVR1     1192
SNDINIT:SNDGVR2     11A1
SNDINIT:SNDHIT      114D
SNDINIT:SNDINSTR    1132
SNDINIT:SNDINTRO    1124
SNDINIT:SNDKILL     1159
SNDINIT:SNDLIST     11BC
SNDINIT:SNDWAA      116A
SNDINIT:SNDWALL     1140
SNDINIT:SNDWIN      11B0
SNDINSTR            1
SNDINTRO            0
SNDKILL             4
SNDPLAY             11EC
SNDPLTN             3
SNDWAA              5
SNDWALL             2
SNDWIN              A
STACUR              2C8A
STAEMPTY            2C4E
STAINIT             2BA8
STANEXT             2C8C
STANONE             FFFFFFFF
STAPLOT             2C1E
STAPLOT:PLTTBL      2C3A
START               2C50
START:LOOP          2C60
START:WINT          2C66
STAUPD              2BB8
STAUPD:DOUPD        2BDE
STAUPD:INITBL       2BF6
STAUPD:UPDTBL       2C0A
SYSINIT             10C2
TANENEM             3
TANHEIGH            18
TANID               2C84
TANINIT             1810
TANINIT:BOT         1856
TANPLAY             2
TANPLOT             1A9C
TANPLOT:END         1B18
TANUPD              188A
TANUPD:BOT2         1928
TANUPD:CHKDWN       18CE
TANUPD:CHKLEFT      18AE
TANUPD:CHKVERT      1A1E
TANUPD:CHKX         19F0
TANUPD:CHKY         1A08
TANUPD:COLBOT       1A5A
TANUPD:COLLFT       1A46
TANUPD:COLRGT       1A32
TANUPD:COLTOP       1A76
TANUPD:CONT1        18BE
TANUPD:CONT2        19D0
TANUPD:DISP         18DE
TANUPD:DONE         1A90
TANUPD:ENDALG       196C
TANUPD:FABSC        1A6E
TANUPD:FALSC        1A56
TANUPD:FARSC        1A42
TANUPD:FATSC        1A8A
TANUPD:FINCOLS      1A90
TANUPD:NEGVELX      194C
TANUPD:NEGVELY      1964
TANUPD:NOORGX       19E6
TANUPD:NOORGY       19FA
TANUPD:POSVELX      1952
TANUPD:POSVELY      196A
TANUPD:RECX         1A16
TANUPD:RECY         1A26
TANUPD:SUBRTF       19C2
TANUPD:VELY         1954
TANWIDTH            18
TIERRAHUMEDA        A1B28
UTLCHCOL            13AE
UTLCHCOL:END        13DC
UTLCHCOL:NOCOL      13DA
UTLCHRWD            8
UTLINIT             1366
UTLPRINT            137C
UTLPRINT:ENDLOOP    138E
UTLPRINT:LOOP       1384
UTLRAND             13E2
UTLRAND:RANDVEC     1400
UTLRNDIX            2C90
UTLSFIL             12A
UTLSPEN             0
WINPLOT             2A96
WINPLOT:DONE        2ACA
WINPLOT:TXT1        2AD0
WINPLOT:TXT2        2ADD
WINUPD              2A7A
WINUPD:CONT         2A8E
